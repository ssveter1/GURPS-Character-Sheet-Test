<div class="sheet-wrapper">
	<!-- HIDDEN FIELDS -->
	<input type="hidden" name="attr_10" value="10" disabled="disabled" />
	<input type="hidden" name="attr_VS" value="vs:" disabled="disabled" />
	<input type="hidden" name="attr_languages_points" value="0" />
	<input type="hidden" name="attr_cf_points" value="0" />
	<input type="hidden" name="attr_advantages_points" value="0" />
	<input type="hidden" name="attr_disadvantages_points" value="0" />
	<input type="hidden" name="attr_racial_points" value="0" />
	<input type="hidden" name="attr_skills_points" value="0" />
	<input type="hidden" name="attr_techniques_points" value="0" />
	<input type="hidden" name="attr_spells_points" value="0" />
	<input type="hidden" name="attr_core_roll" value="[[3d6]]" disabled="disabled"/>
	<!-- /HIDDEN FIELDS -->
	
	<div class="sheet-box-no-border sheet-logo"><div class="sheet-popup"><img src="http://i.imgur.com/FSigdJx.gif" /></div><span class="sheet-tooltip">GURPS is a trademark of Steve Jackson Games, and its rules and art are copyrighted by Steve Jackson Games. All rights are reserved by Steve Jackson Games. This character sheet is a creation modified by Scott Sveter and is released for free use, and not for resale, under the permissions granted in the <a href="http://www.sjgames.com/general/online_policy.html">Steve Jackson Games Online Policy.</a></span></div>
		
	<div class="sheet-box sheet-characterheading">	
		<div class="sheet-row sheet-row-heading">	
			<div class="sheet-cell sheet-col0 sheet-label">Name:</div><div class="sheet-cell sheet-col1"><input name="attr_character_name" type="text" title="@{character_name}" placeholder="Character Name"></div><div class="sheet-cell sheet-col0 sheet-label">Race:</div><div class="sheet-cell sheet-col1"><input name="attr_race_name" type="text" title="@{race_name}" placeholder="Race"></div><div class="sheet-cell sheet-col00 sheet-label">Point Total:</div><div class="sheet-cell sheet-col2"><input type="number" value="0" name="attr_total_spent_points" readonly="readonly" /></div>
		</div>
		<div class="sheet-row sheet-row-heading">
			<div class="sheet-cell sheet-col3 sheet-label">Size Modifier:</div><div class="sheet-cell sheet-col2"><input type="number" name="attr_size" value="0" /></div><div class="sheet-cell sheet-col2 sheet-label">Ht:</div><div class="sheet-cell sheet-col2"><input type="text" name="attr_ht" value="0" /></div><div class="sheet-cell sheet-col2 sheet-label">Wt:</div><div class="sheet-cell sheet-col2"><input type="text" name="attr_Wt" value="0" /></div><div class="sheet-cell sheet-col2 sheet-label">Age:</div><div class="sheet-cell sheet-col2"><input type="text" name="attr_age" value="0" /></div><div class="sheet-cell sheet-col3 sheet-label">Handedness:</div><div class="sheet-cell sheet-col0"><input type="text" name="attr_hand" /></div><div class="sheet-cell sheet-col00 sheet-label">Unspent Pts:</div><div class="sheet-cell sheet-col2"><input type="text" value="@{unspent_points}" name="attr_characterunspentpoints" disabled="disabled" /></div>
		</div>
		<div class="sheet-row sheet-row-heading">
			<div class="sheet-cell sheet-col5 sheet-label">Description:</div><div class="sheet-cell sheet-col6"><input type="text-area" name="attr_chardescription" /></div>
		</div>
	</div>
	<hr />	

	<!-- ===== ===== ===== ===== TABS ===== ===== ===== ===== -->
	<input type="radio" name="attr_tab" class="sheet-tab sheet-tab1" value="1" title="General" checked="checked" />
	<input type="radio" name="attr_tab" class="sheet-tab sheet-tab2" value="2" title="Traits" />
	<input type="radio" name="attr_tab" class="sheet-tab sheet-tab3" value="3" title="Skills" />
	<input type="radio" name="attr_tab" class="sheet-tab sheet-tab4" value="4" title="Combat" />
	<input type="radio" name="attr_tab" class="sheet-tab sheet-tab5" value="5" title="Wealth" />
	<input type="radio" name="attr_tab" class="sheet-tab sheet-tab6" value="6" title="Grimoire" />
	<input type="radio" name="attr_tab" class="sheet-tab sheet-tab0" value="0" title="Sheet Options" alt="y" />
	<div class="sheet-tab-br"></div>


	<!-- ===== ===== ===== ===== GENERAL TAB ===== ===== ===== ===== -->
	<div class="sheet-tab1">

		<!-- _____ _____ ATTRIBUTE BOX _____ _____ -->
			
		<div class="sheet-box sheet-attribute">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Attributes</div>
					<div class="sheet-cell sheet-col1">
						<div class="sheet-popup">Mod</div>
						<span class="sheet-tooltip">
							A modifier that will be applied to your attribute.
							<br />
							All derived attributes draw their base from your<br />
							unmodified attributes. Therefore this MOD will<br />
							generally only affect direct attribute rolls and<br />
							skills rolls.
						</span>
					</div>
					<div class="sheet-cell sheet-col2">Pts</div>
				</div> <!-- .sheet-header -->
				<div class="sheet-main-attribute">
					<div class="sheet-row sheet-row-strength">
						<div class="sheet-cell sheet-col0 sheet-label">
							<div class="sheet-popup">ST</button></div>
							<span class="sheet-tooltip">
								Strength
								<br />
								10pts/level
								<br />
								Unmodified <span name="attr_strength_base"></span>
							</span>
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="number" name="attr_strength" value="10" readonly="readonly" >
						</div>
						<div class="sheet-cell sheet-col2">
							<input type="number" name="attr_strength_mod" value="0" step="1" />
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="number" name="attr_strength_points" value="0" step="10" />
						</div>
						<div class="sheet-cell sheet-col4">
							<button type='roll' name='str-roll' value='@{wtype}&{template:GURPS} {{roll=[[3d6]]}} {{target= [[@{strength} + @{Modifier} ]] }} {{success=[[ [[@{strength}  + @{modifier}]] +1]] }} {{rolltype=ABILITY CHECK}} {{rolltype= ABILITY CHECK}} {{rollname=Strength}} {{charactername=@{character_name}}}' />
						</div>
					</div> <!-- .sheet-row -->
					<div class="sheet-row sheet-row-dexterity">
						<div class="sheet-cell sheet-col0 sheet-label">
							<div class="sheet-popup">DX</div>
							<span class="sheet-tooltip">
								Dexterity
								<br />
								20pts/level
								<br />
								Unmodified: <span name="attr_dexterity_base"></span>
							</span>
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="number" name="attr_dexterity" value="10" readonly="readonly" >
						</div>
						<div class="sheet-cell sheet-col2">
							<input type="number" name="attr_dexterity_mod" value="0" step="1" />
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="number" name="attr_dexterity_points" value="0" step="20" />
						</div>
						<div class="sheet-cell sheet-col4">
							<button type="roll" value='@{wtype}&{template:GURPS} {{roll=[[3d6]]}} {{target= [[@{dexterity} + @{Modifier} ]] }} {{success=[[ [[@{dexterity}  + @{modifier}]] +1]] }} {{rolltype= ABILITY CHECK}} {{rollname=Dexterity}}{{charactername=@{character_name}}}' />
						</div>
					</div> <!-- .sheet-row -->
					<div class="sheet-row sheet-row-intelligence">
						<div class="sheet-cell sheet-col0 sheet-label">
							<div class="sheet-popup">IQ</div>
							<span class="sheet-tooltip">
								Intelligence
								<br />
								20pts/level
								<br />
								Unmodified: <span name="attr_intelligence_base"></span>
							</span>
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="number" name="attr_intelligence" value="10" readonly="readonly" >
						</div>
						<div class="sheet-cell sheet-col2">
							<input type="number" name="attr_intelligence_mod" value="0" step="1" />
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="number" name="attr_intelligence_points" value="0" step="20" />
						</div>
						<div class="sheet-cell sheet-col4">
							<button type="roll" value='@{wtype}&{template:GURPS} {{roll=[[3d6]]}} {{target= [[@{intelligence} + @{Modifier} ]] }} {{success=[[ [[@{intelligence}  + @{modifier}]] +1]] }} {{rolltype=ABILITY CHECK}} {{rollname=Intelligence}} {{charactername=@{character_name}}}' />
						</div>
					</div> <!-- .sheet-row -->
					<div class="sheet-row sheet-row-health">
						<div class="sheet-cell sheet-col0 sheet-label">
							<div class="sheet-popup">HT</div>
							<span class="sheet-tooltip">
								Health
								<br />
								10pts/level
								<br />
								Unmodified: <span name="attr_health_base"></span>
							</span>
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="number" name="attr_health" value="10" readonly="readonly">
						</div>
						<div class="sheet-cell sheet-col2">
							<input type="number" name="attr_health_mod" value="0" step="1" />
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="number" name="attr_health_points" value="0" step="10" />
						</div>
						<div class="sheet-cell sheet-col4">
							<button type="roll" value='@{wtype}&{template:GURPS} {{roll=[[3d6]]}} {{target= [[@{health} + @{Modifier} ]] }} {{success=[[ [[@{health}  + @{modifier}]] +1]] }} {{rolltype= ABILITY CHECK}} {{rollname=Health}} {{charactername=@{character_name}}}' />
							</div>
					</div> <!-- .sheet-row -->
				</div>
				<div class="sheet-row sheet-row-perception sheet-hr">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Per</div>
						<span class="sheet-tooltip">
							Perception
							<br />
							Based on Intelligence
							<br />
							5pts/level
							<br />
							Unmodified: <span name="attr_perception_base"></span>
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_perception" value="10" readonly="readonly" >
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_perception_mod" value="0" step="1" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_perception_points" value="0" step="5" />
					</div>
					<div class="sheet-cell sheet-col4">
						<button type="roll" value='@{wtype}&{template:GURPS}} {{roll=[[3d6]]}} {{target= [[@{perception} + @{modifier}]]}} {{success=[[ [[@{perception}  + @{modifier}]] +1]] }} {{rolltype=ABILITY CHECK}} {{rollname=Perception}} {{charactername=@{character_name}}}' />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-willpower">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Will</div>
						<span class="sheet-tooltip">
							Willpower
							<br />
							Based on Intelligence
							<br />
							5pts/level
							<br />
							Unmodified: <span name="attr_willpower_base"></span>
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_willpower" value="10" readonly="readonly">
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_willpower_mod" value="0" step="1" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_willpower_points" value="0" step="5" />
					</div>
					<div class="sheet-cell sheet-col4">
						<button type="roll" value='@{wtype}&{template:GURPS}} {{roll=[[3d6]]}} {{target= [[@{willpower} + @{modifier}]]}} {{success=[[ [[@{willpower}  + @{modifier}]] +1]] }} {{rolltype=ABILITY CHECK}} {{rollname=Willpower}} {{charactername=@{character_name}}}' />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-sub-row sheet-row-fear">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Fear</div>
						<span class="sheet-tooltip">
							Fear Check
							<br />
							Based on Willpower
							<br />
							2pts/level
							<br />
							Unmodified: <span name="attr_fear_check_base"></span>
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_fear_check" value="10" readonly="readonly">
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_fear_check_mod" value="0" step="1" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_fear_check_points" value="0" step="2" />
					</div>
					<div class="sheet-cell sheet-col4">
						<button type='roll' value='@{wtype}&{template:GURPS}} {{roll= [[3d6]] }} {{target= [[@{fear_check} + @{modifier}]] }} {{success=[[ [[@{fear_check} + @{modifier}]] +1]] }} {{charactername=@{character_name}}} {{rolltype=ABILITY CHECK}} {{rollname=Fear/Fright}} '></button>

					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-basic-speed sheet-hr">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Speed</div>
						<span class="sheet-tooltip">
							Basic Speed
							<br />
							Based on Health and Dexterity
							<br />
							5pts/0.25
							<br />
							Unmodified: <span name="attr_basic_speed_base" value="10"></span>
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_basic_speed" value="" readonly="readonly">
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_basic_speed_mod" value="0" step="0.25" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_basic_speed_points" value="0" step="5" />
					</div>
					<div class="sheet-cell sheet-col4">
						<button class="sheet-roll-tracker" type="roll" value="/em has a speed of [[@{basic_speed} &{tracker}]]" name="roll_init" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-basic-move">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Move</div>
						<span class="sheet-tooltip">
							Basic Move
							<br />
							Based on Basic Speed
							<br />
							5pts/level
							<br />
							Unmodified: <span name="attr_basic_move_base" value="0"></span>
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_basic_move" value="" readonly="readonly">
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_basic_move_mod" value="0" step="1" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_basic_move_points" value="0" step="5" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-dodge">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Dodge</div>
						<span class="sheet-tooltip">
							Dodge
							<br />
							Based on Basic Speed
							<br />
							Unmodified: <span name="attr_dodge_base" value="0"></span>
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_dodge" value="" readonly="readonly">
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_dodge_mod" value="0" step="1" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-lift-st sheet-hr">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Lift ST</div>
						<span class="sheet-tooltip">
							Lifting Strength
							<br />
							Based on Strength
							<br />
							3pts/level
							<br />
							Unmodified: <input class="sheet-inline" type="number" name="attr_lift_st_base" readonly="readonly">
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_lift_st" value="0" readonly="readonly">
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_lift_st_mod" value="0" step="1" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_lift_st_points" value="0" step="3" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-basic-lift">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Lift</div>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_basic_lift" value="0" readonly="readonly">
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-strike-st sheet-hr">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Striking</div>
						<span class="sheet-tooltip">
							Striking Strength
							<br />
							Based on Strength
							<br />
							5pts/level
							<br />
							Unmodified: <input class="sheet-inline" type="number" name="attr_striking_st_base" readonly="readonly">
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_striking_st" value="0" readonly="readonly">
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_striking_st_mod" value="0" step="1" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_striking_st_points" value="0" step="5" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-thrust-damage">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Thrust</div>
						<span class="sheet-tooltip">
							Thrust Damage
							<br />
							<div>See page 16 for the complete table.</div>
							<table>
								<thead><tr><th>Strength</th><th>Thrust</th></tr></thead>
								<tbody>
									<tr><td>1</td><td>1d6-6</td></tr>
									<tr><td>2</td><td>1d6-6</td></tr>
									<tr><td>3</td><td>1d6-5</td></tr>
									<tr><td>4</td><td>1d6-5</td></tr>
									<tr><td>5</td><td>1d6-4</td></tr>
									<tr><td>6</td><td>1d6-4</td></tr>
									<tr><td>7</td><td>1d6-3</td></tr>
									<tr><td>8</td><td>1d6-3</td></tr>
									<tr><td>9</td><td>1d6-2</td></tr>
									<tr><td>10</td><td>1d6-2</td></tr>
									<tr><td>11</td><td>1d6-1</td></tr>
									<tr><td>12</td><td>1d6-1</td></tr>
									<tr><td>13</td><td>1d6</td></tr>
								</tbody>
							</table>
							<table>
								<thead><tr><th>Strength</th><th>Thrust</th></tr></thead>
								<tbody>
									<tr><td>14</td><td>1d6</td></tr>
									<tr><td>15</td><td>1d6+1</td></tr>
									<tr><td>16</td><td>1d6+1</td></tr>
									<tr><td>17</td><td>1d6+2</td></tr>
									<tr><td>18</td><td>1d6+2</td></tr>
									<tr><td>19</td><td>2d6-1</td></tr>
									<tr><td>20</td><td>2d6-1</td></tr>
									<tr><td>21</td><td>2d6</td></tr>
									<tr><td>22</td><td>2d6</td></tr>
									<tr><td>23</td><td>2d6+1</td></tr>
									<tr><td>24</td><td>2d6+1</td></tr>
									<tr><td>25</td><td>2d6+2</td></tr>
									<tr><td>26</td><td>2d6+2</td></tr>
								</tbody>
							</table>
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_thrust" value="1d6-2" />
					</div>
					<div class="sheet-cell sheet-col4">
						<button type="roll" value="/roll @{thrust}" name="roll_dmgThrust" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-swing-damage">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Swing</div>
						<span class="sheet-tooltip">
							Swing Damage
							<br />
							<div>See page 16 for the complete table.</div>
							<table>
								<thead><tr><th>Strength</th><th>Swing</th></tr></thead>
								<tbody>
									<tr><td>1</td><td>1d6-5</td></tr>
									<tr><td>2</td><td>1d6-5</td></tr>
									<tr><td>3</td><td>1d6-4</td></tr>
									<tr><td>4</td><td>1d6-4</td></tr>
									<tr><td>5</td><td>1d6-3</td></tr>
									<tr><td>6</td><td>1d6-3</td></tr>
									<tr><td>7</td><td>1d6-2</td></tr>
									<tr><td>8</td><td>1d6-2</td></tr>
									<tr><td>9</td><td>1d6-1</td></tr>
									<tr><td>10</td><td>1d6</td></tr>
									<tr><td>11</td><td>1d6+1</td></tr>
									<tr><td>12</td><td>1d6+2</td></tr>
									<tr><td>13</td><td>2d6-1</td></tr>
								</tbody>
							</table>
							<table>
								<thead><tr><th>Strength</th><th>Swing</th></tr></thead>
								<tbody>
									<tr><td>14</td><td>2d6</td></tr>
									<tr><td>15</td><td>2d6+1</td></tr>
									<tr><td>16</td><td>2d6+2</td></tr>
									<tr><td>17</td><td>3d6-1</td></tr>
									<tr><td>18</td><td>3d6</td></tr>
									<tr><td>19</td><td>3d6+1</td></tr>
									<tr><td>20</td><td>3d6+2</td></tr>
									<tr><td>21</td><td>4d6-1</td></tr>
									<tr><td>22</td><td>4d6</td></tr>
									<tr><td>23</td><td>4d6+1</td></tr>
									<tr><td>24</td><td>4d6+2</td></tr>
									<tr><td>25</td><td>5d6-1</td></tr>
									<tr><td>26</td><td>5d6</td></tr>
								</tbody>
							</table>
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_swing" value="1d6" />
					</div>
					<div class="sheet-cell sheet-col4">
						<button type="roll" value="/roll @{swing}" name="roll_dmgSwing" />
					</div>
				</div> <!-- .sheet-row -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-attributes -->
		
		
		
		<div class="sheet-box sheet-stats">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Stats</div>
					<div class="sheet-cell sheet-col1">Value</div>
					<div class="sheet-cell sheet-col2">Mod</div>
					<div class="sheet-cell sheet-col3">Pts</div>
				</div> <!-- .sheet-header -->
				<div class="sheet-row sheet-row-hit-points">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Max HP</div>
						<span class="sheet-tooltip">
							Hit Points
							<br />
							Based on Strength
							<br />
							2pts/level
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_hit_points_max" value="10" readonly="readonly" />
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_hit_points_mod" value="0" step="1" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_hit_points_points" value="0" step="2" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-sub-row sheet-row-current-points">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Current HP</div>
						<span class="sheet-tooltip">
							Current Hit Points
							<br />
							When you're hit points are low, you take penalties.
							<br />
							See Page 419.
							<table>
								<tbody>
									<tr>
										<td class="sheet-label">Reeling</td>
										<td><input type="text" name="attr_hp_reeling" value="Less than [[(@{hit_points|max}) / 3]]" disabled="disabled"></td>
									</tr>
									<tr>
										<td colspan="2">
												- Halve Move, Speed, and Dodge
										</td>
									</tr>
									<tr>
										<td class="sheet-label">Verge of Collapse</td>
										<td><input type="text" value="Less than 0" disabled="disabled"></td>
									</tr>
									<tr>
										<td colspan="2">
												- Roll every turn @{VS} HT or fall unconscious.
											<br />
												- Your HT roll is at -1 for every 1xHP you are below 0.
											<br />
												- If you do nothing, and don't defend, you don't have to roll.
										</td>
									</tr>
									<tr>
										<td class="sheet-label">Verge of Death</td>
										<td><input value="(@{hit_points|max}) * -1" disabled="disabled"></td>
									</tr>
									<tr>
										<td colspan="2">
												- Roll once @{VS} HT to stay alive.
											<br />
												- If you fail by 1 or 2 you are mortally wounded, but not dead.
											<br />
												- Roll again every time you take injury that puts you below<br />
												another multiple of your max HP.
										</td>
									</tr>
									<tr>
										<td class="sheet-label">Death</td>
										<td><input value="(@{hit_points|max}) * -5" disabled="disabled"></td>
									</tr>
									<tr>
										<td colspan="2">
												- You are dead.
										</td>
									</tr>
									<tr>
										<td class="sheet-label">Total Destruction</td>
										<td><input value="(@{hit_points|max}) * -10" disabled="disabled"></td>
									</tr>
									<tr>
										<td colspan="2">
												- Your body has been destroyed beyond recognition or ressurection.
										</td>
									</tr>
								</tbody>
							</table>
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_hit_points" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-fatigue-points">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Max FP</div>
						<span class="sheet-tooltip">
							Fatigue Points
							<br />
							Based on Health
							<br />
							3pts/level
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_fatigue_points_max" value="10" readonly="readonly" />
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_fatigue_points_mod" value="0" step="1" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_fatigue_points_points" value="0" step="3" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-sub-row sheet-row-current-points">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Current FP</div>
						<span class="sheet-tooltip">
							Current Fatigue Points
							<br />
							When your fatigue points are low you take penalties.
							<br />
							See Page 426.
							<table>
								<tbody>
									<tr>
										<td class="sheet-label">Tired</td>
										<td><input type="text" name="attr_fp_tired" value="Less than [[(@{fatigue_points|max}) / 3]]" disabled="disabled"></td>
									</tr>
									<tr>
										<td colspan="2">
												- Halve Move, ST, and Dodge
										</td>
									</tr>
									<tr>
										<td class="sheet-label">Verge of Collapse</td>
										<td><input type="text" value="Less than 0" disabled="disabled"></td>
									</tr>
									<tr>
										<td colspan="2">
												- Further FP loss also comes off your HP.
											<br />
												- Roll against Will to do anything besides rest or talk.
											<br />
												- If you fail your Will roll, you fall unconscious.
											<br />
												- On a critical failure, roll @{VS} HT or suffer a heart attack.
										</td>
									</tr>
									<tr>
										<td class="sheet-label">Unconscious</td>
										<td><input value="[[-(@{fatigue_points|max})]]" disabled="disabled"></td>
									</tr>
									<tr>
										<td colspan="2">
												- Immediately fall unconscious
											<br />
												- FP can't drop any lower, but you still lose HP.
											<br />
												- You regain consciousness at 0 FP
										</td>
									</tr>
								</tbody>
							</table>
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_fatigue_points" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-energy-points">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Max ER</div>
						<span class="sheet-tooltip">
							Energy Reserve
							<br />
							Rules can vary depending on what<br />
							magic system you are using.
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_energy_points_max"  />
					</div>
					<div class="sheet-cell sheet-col2"></div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_energy_points_points" value="0" step="3" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-sub-row sheet-row-current-points">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Current ER</div>
						<span class="sheet-tooltip">
							Current Energy Reserve
							<br />
							Rules can vary.
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_energy_points" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-hr">
					<div class="sheet-cell sheet-col0 sheet-label">
						<input type="text" name="attr_user_pool1_name" />
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_user_pool1_max" />
					</div>
					<div class="sheet-cell sheet-col2"></div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_user_pool1_points" value=0 />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-sub-row sheet-row-current-points">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Current</div>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_user_pool1" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row">
					<div class="sheet-cell sheet-col0 sheet-label">
						<input type="text" name="attr_user_pool2_name" />
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_user_pool2_max" />
					</div>
					<div class="sheet-cell sheet-col2"></div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_user_pool2_points" value=0 />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-sub-row sheet-row-current-points">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Current</div>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_user_pool2" value="0" />
					</div>
				</div> <!-- .sheet-row -->
			</div>
		</div>
		

		<div class="sheet-box sheet-senses">
			<div class="sheet-table">
				<div class="sheet-header">Sense Checks</div>
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Sense</div>
					<div class="sheet-cell sheet-col1">Stat</div>
					<div class="sheet-cell sheet-col2">mod</div>
					<div class="sheet-cell sheet-col3">pts</div>
					<div class="sheet-cell sheet-col4"></div>
					<div class="sheet-cell sheet-col0">Sense</div>
					<div class="sheet-cell sheet-col1">Stat</div>
					<div class="sheet-cell sheet-col2">mod</div>
					<div class="sheet-cell sheet-col3">Pts</div>
					<div class="sheet-cell sheet-col4"></div>
				</div>
				<div class="sheet-row sheet-row-senses">
					<div class="sheet-cell sheet-col0">
						<div class="sheet-popup">Vision</div>
						<span class="sheet-tooltip">
							Visual Perception
							<br />
							Based on Perception
							<br />
							2pts/level
							<br />
							Unmodified: <span name="attr_vision_base"></span>
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_vision" value="10" readonly="readonly">
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_vision_mod" value="0" step="1" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_vision_points" value="0" step="2" />
					</div>
					<div class="sheet-cell sheet-col4">
						<button type="roll" value='@{wtype}&{template:GURPS}} {{roll=[[3d6]]}} @{VS} Vision {{target= [[@{vision} + @{modifier}]]}} {{success=[[ [[@{vision}  + @{modifier}]] +1]] }} {{rolltype=SENSE CHECK}} {{rollname=Vision}} {{charactername=@{character_name}}}' />
					</div>
					<div class="sheet-cell sheet-col0">
						<div class="sheet-popup">Hearing</div>
						<span class="sheet-tooltip">
							Audio Perception
							<br />
							Based on Perception
							<br />
							2pts/level
							<br />
							Unmodified: <span name="attr_hearing_base"></span>
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_hearing" value="10" readonly="readonly">
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_hearing_mod" value="0" step="1" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_hearing_points" value="0" step="2" />
					</div>
					<div class="sheet-cell sheet-col4">
						<button type="roll" value='@{wtype}&{template:GURPS}} {{roll=[[3d6]]}} {{target= [[@{hearing} + @{modifier}]]}} {{success=[[ [[@{hearing}  + @{modifier}]] +1]] }} {{rolltype=SENSE CHECK}} {{rollname=Hearing}} {{charactername=@{character_name}}}' />
					</div>
				</div>
				<div class="sheet-row sheet-row-senses">
					<div class="sheet-cell sheet-col0">
						<div class="sheet-popup">Touch</div>
						<span class="sheet-tooltip">
							Touch Perception
							<br />
							Based on Perception
							<br />
							2pts/level
							<br />
							Unmodified: <span name="attr_touch_base"></span>
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_touch" value="10" readonly="readonly">
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_touch_mod" value="0" step="1" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_touch_points" value="0" step="2" />
					</div>
					<div class="sheet-cell sheet-col4">
						<button type="roll" value='@{wtype}&{template:GURPS}} {{roll=[[3d6]]}} {{target= [[@{touch} + @{modifier}]]}} {{success=[[ [[@{touch}  + @{modifier}]] +1]] }} {{rolltype=SENSE CHECK}} {{rollname=Touch}} {{charactername=@{character_name}}}' />
					</div>
					<div class="sheet-cell sheet-col0">
						<div class="sheet-popup">Taste/Smell</div>
						<span class="sheet-tooltip">
							Taste & Smell Perception
							<br />
							Based on Perception
							<br />
							2pts/level
							<br />
							Unmodified: <span name="attr_taste_smell_base"></span>
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_taste_smell" value="10" readonly="readonly">
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_taste_smell_mod" value="0" step="1" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_taste_smell_points" value="0" step="2" />
					</div>
					<div class="sheet-cell sheet-col4">
						<button type="roll" value='@{wtype}&{template:GURPS}} {{roll=[[3d6]]}} {{target= [[@{taste_smell} + @{modifier}]]}} {{success=[[ [[@{taste_smell}  + @{modifier}]] +1]] }} {{rolltype=SENSE CHECK}} {{rollname=Taste or Smell}} {{charactername=@{character_name}}}' />				
					</div>
				</div>
				<div class="sheet-row sheet-row-senses">
					<div class="sheet-cell sheet-col5 sheet-label">
						Notes:
					</div>
					<div class="sheet-cell sheet-col6">
						<input type="text" name="attr_notes" />
					</div>
				</div> <!-- .sheet-row -->
				<fieldset class="repeating_senses">
					<div class="sheet-row sheet-row-senses">
						<div class="sheet-cell sheet-col5 sheet-label">
							Notes:
						</div>
						<div class="sheet-cell sheet-col6">
							<input type="text" name="attr_notes" />
						</div>
					</div> <!-- .sheet-row -->
				</fieldset>
			</div>
		</div>

		<div class="sheet-box sheet-health">
			<div class="sheet-table">
				<div class="sheet-header">Injury Checks</div>
				<div class="sheet-row">
					<div class="sheet-cell sheet-col0"><div class="sheet-popup">Consciousness</div>
						<span class="sheet-tooltip">Based on HT see B423<br />Unmodified: <span name="attr_consciousness_base"></span></span></div>
					<div class="sheet-cell sheet-col1"><input type="number" name="attr_consciousness" value="10" readonly="readonly"></div>
					<div class="sheet-cell sheet-col2"><div class="sheet-popup"><input type="number" name="attr_consciousness_mod" value="0" step="1"/></div><span class="sheet-tooltip">Modifier here</span></div><input type="hidden" name="attr_consciousness_points" value="0" />
					<div class="sheet-cell sheet-col3"><button type="roll" value='@{wtype}&{template:GURPS} {{roll=[[3d6]]}} {{target= [[@{consciousness} + @{Modifier} ]] }} {{success=[[ [[@{consciousness}  + @{modifier}]] +1]] }} {{rolltype=CONSCIOUSNESS CHECK}} {{rollname=Consciousness}} {{charactername= @{character_name}}}' /></div>
					<div class="sheet-cell sheet-col0"><div class="sheet-popup">Death</div><span class="sheet-tooltip">Based on HT see B419<br />Unmodified: <span name="attr_death_base"></span></span></div>
					<div class="sheet-cell sheet-col1"><input type="number" name="attr_death" value="10" readonly="readonly"></div>
					<div class="sheet-cell sheet-col2"><div class="sheet-popup"><input type="number" name="attr_death_mod" value="0" step="1" /></div><span class="sheet-tooltip">Modifier here</span></div><input type="hidden" name="attr_death_points" value="0" />
					<div class="sheet-cell sheet-col3"><button type="roll" value='@{wtype}&{template:GURPS} {{roll=[[3d6]]}} {{target= [[@{death} + @{Modifier} ]] }} {{success=[[ [[@{death}  + @{modifier}]] +1]] }} {{rolltype=DEATH CHECK}} {{rollname=Death}} {{charactername= @{character_name}}}' /></div>
				</div>
				<fieldset class="repeating_health">
					<div class="sheet-row sheet-row-health">
						<div class="sheet-cell sheet-col4 sheet-label">
							Notes:
						</div>
						<div class="sheet-cell sheet-col5">
							<input type="text" name="attr_notes" />
						</div>
					</div> <!-- .sheet-row -->
				</fieldset>
			</div>
		</div>
		
		<!-- _____ _____ LIFTING BOX _____ _____ -->
		
		<div class="sheet-box sheet-lift">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Lifting and Moving</div>
					<div class="sheet-cell sheet-col1">Weight</div>
				</div> <!-- .sheet-header -->
				<div class="sheet-row sheet-row-simple-lift">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Simple Lift</div>
						<span class="sheet-tooltip">
							The weight the character can lift overhead<br />with one hand in one second.
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_simple_lift" value="@{basic_lift}" disabled="disabled" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-one-handed-lift">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">One-Handed Lift</div>
						<span class="sheet-tooltip">
							The weight the character can lift overhead<br />with one hand in two seconds.
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_one_hand_lift" value="2 * @{basic_lift}" disabled="disabled" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-two-handed-lift">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Two-Handed Lift</div>
						<span class="sheet-tooltip">
							The weight the character can lift overhead<br />with both hands in four seconds.
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_two_hand_lift" value="8 * @{basic_lift}" disabled="disabled" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-shove-knock-over">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Shove &amp; Knock Over</div>
						<span class="sheet-tooltip">
							The weight of an object the character can<br />shove and knock over.
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_shove_lift" value="12 * @{basic_lift}" disabled="disabled" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-running-shove-knock-over">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Running Shove &amp; Knock Over</div>
						<span class="sheet-tooltip">
							The weight of an object the character can<br />shove and knock over with a running start.
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_run_shove_lift" value="24 * @{basic_lift}" disabled="disabled" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-carry-on-back">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Carry On Back</div>
						<span class="sheet-tooltip">
							The weight the character can carry slung<br />over his/her back.
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_carry_back_lift" value="15 * @{basic_lift}" disabled="disabled" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-shift-slightly">
					<div class="sheet-cell sheet-col0 sheet-label">
						<div class="sheet-popup">Shift Slightly</div>
						<span class="sheet-tooltip">
							The weight of an object that the character<br />can shift slightly on a floor.
						</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_shift_lift" value="50 * @{basic_lift}" disabled="disabled" />
					</div>
				</div> <!-- .sheet-row -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-lift -->
		

		
		

		
		

		<!-- _____ _____ ENCUMBERANCE BOX _____ _____ -->
		
		<div class="sheet-box sheet-encumberance">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Encumberance</div>
					<div class="sheet-cell sheet-col1">Max Load</div>
					<div class="sheet-cell sheet-col2">Move</div>
					<div class="sheet-cell sheet-col3">Dodge</div>
				</div>
				<div class="sheet-row sheet-row-encumberance-0">
					<div class="sheet-cell sheet-col0 sheet-label">
						None (0)
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_lift_0" value="@{basic_lift}" disabled="disabled" />
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_move_0" value="@{basic_move}" disabled="disabled" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_dodge_0" value="@{dodge} " disabled="disabled" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-encumberance-1">
					<div class="sheet-cell sheet-col0 sheet-label">
						Light (1)
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_lift_1" value="2 * @{basic_lift}" disabled="disabled" />
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_move_1" value="floor((@{basic_move}) * 0.8)" disabled="disabled" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_dodge_1" value="@{dodge} - 1" disabled="disabled" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-encumberance-2">
					<div class="sheet-cell sheet-col0 sheet-label">
						Medium (2)
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_lift_2" value="3 * @{basic_lift}" disabled="disabled" />
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_move_2" value="floor((@{basic_move}) * 0.6)" disabled="disabled" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_dodge_2" value="@{dodge} - 2" disabled="disabled" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-encumberance-3">
					<div class="sheet-cell sheet-col0 sheet-label">
						Heavy (3)
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_lift_3" value="6 * @{basic_lift}" disabled="disabled" />
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_move_3" value="floor((@{basic_move}) * 0.4)" disabled="disabled" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_dodge_3" value="@{dodge} - 3" disabled="disabled" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-encumberance-4">
					<div class="sheet-cell sheet-col0 sheet-label">
						X-Heavy (4)
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_lift_4" value="10 * @{basic_lift}" disabled="disabled" />
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_move_4" value="floor((@{basic_move}) * 0.2)" disabled="disabled" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_dodge_4" value="@{dodge} - 4" disabled="disabled" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-load sheet-hr">
					<div class="sheet-cell sheet-col0 sheet-label">
						Current (<span name="attr_encumbrance_level" value=""></span>)
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_total_weight" value="" readonly="readonly" />
					</div>
					<div class="sheet-cell sheet-col2">
						<input type="number" name="attr_current_move" value="" readonly="readonly" />
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_current_dodge" value="" readonly="readonly" />
					</div>
				</div> <!-- .sheet-row -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-encumberance -->
		
		
		


	</div> <!-- .sheet-tab1 -->


	<!-- ===== ===== ===== ===== TRAITS TAB ===== ===== ===== ===== -->
	<div class="sheet-tab2">

		<!-- _____ _____ LANGUAGE BOX _____ _____ -->

		<div class="sheet-box sheet-language">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Languages</div>
					<div class="sheet-cell sheet-col1">Spoken</div>
					<div class="sheet-cell sheet-col2">Written</div>
					<div class="sheet-cell sheet-col3">Pts</div>
				</div> <!-- .sheet-header -->
				<fieldset class="repeating_languages">
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col0">
							<input type="text" name="attr_name" title="@{repeating_languages_$X_name}" placeholder="Language Name"/>
						</div>
						<div class="sheet-cell sheet-col1">
							<select name="attr_spoken">
								<option value="0">!Native!</option>
								<option value="3">Native</option>
								<option value="2">Accented</option>
								<option value="1.0">One-Way</option>
								<option value="1">Broken</option>
								<option value="0" selected>None</option>
							</select>
						</div>
						<div class="sheet-cell sheet-col2">
							<select name="attr_written">
								<option value="0">!Native!</option>
								<option value="3">Native</option>
								<option value="2">Accented</option>
								<option value="1.0">One-Way</option>
								<option value="1">Broken</option>
								<option value="0" selected>None</option>
							</select>
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="text" name="attr_points" value="@{spoken} + @{written}" disabled="disabled" title="@{repeating_languages_$X_points}" placeholder="0"/>
						</div>
					</div> <!-- .sheet-row -->
				</fieldset> <!-- .repeating_languages -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-language -->
		
		
		<!-- _____ _____ CULTURE BOX _____ _____ -->
		
		<div class="sheet-box sheet-culture">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Cultural Familiarities</div>
					<div class="sheet-cell sheet-col1">Pts</div>
				</div> <!-- .sheet-header -->
				<fieldset class="repeating_cultures">
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col0">
							<input type="text" name="attr_name" title="@{repeating_cultures_$X_name}" placeholder="Culture Name"/>
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="number" name="attr_points" title="@{repeating_cultures_$X_points}" placeholder="0"/>
						</div>
					</div> <!-- .sheet-row -->
				</fieldset> <!-- .repeating_languages -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-language -->
		
		<div class="sheet-clearfix"> </div>

		<!-- _____ _____ TECH LEVEL BOX _____ _____ -->
		
		<div class="sheet-box sheet-tech">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0"><div class="sheet-popup">Tech Level</div>
						<span class="sheet-tooltip">
							This is the technology level that you character is familiar with.
							<br />
							It costs 5 points to raise this above or below the campaign"s<br />normal TL.</span>
							<div class="sheet-clearfix"></div>
					</div>
					<div class="sheet-cell sheet-col1">Pts</div>
				</div>
				<div class="sheet-row sheet-row-stats">
					<div class="sheet-cell sheet-col0"><select name="attr_tldefined">
						<option value="0">TL0: Stone Age (Prehistory and later).</option>
						<option value="1">TL1: >Bronze Age (3500 B.C.+).</option>
						<option value="2">TL2: Iron Age (1200 B.C.+).</option>
						<option value="3">TL3: Medieval (600 A.D.+).</option>
						<option value="4">TL4: Age of Sail (1450+).</option>
						<option value="5">TL5: Industrial Revolution (1730+).</option>
						<option value="6">TL6: Mechanized Age (1880+).</option>
						<option value="7">TL7: Nuclear Age (1940+).</option>
						<option value="8">TL8: Digital Age (1980+).</option>
						<option value="9">TL9: Microtech Age (2025+?).</option>
						<option value="10">TL10: Robotic Age (2070+?).</option>
						<option value="11">TL11: Age of Exotic Matter.</option>
						<option value="12">TL12+ Whatever the GM likes!</option>
						</select>
					</div>
					<div class="sheet-cell sheet-col1"><input type="text" name="attr_tl_pts" title="@{tl_pts}" placeholder="0" /></div>
				</div>
			</div>
		</div>

		<!-- _____ _____ APPEARANCE BOX _____ _____ -->
		<div class="sheet-box sheet-appearance">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Appearance</div>
					<div class="sheet-cell sheet-col1">Pts</div>
				</div>
				<div class="sheet-row sheet-row-stats">
					<div class="sheet-cell sheet-col0">
						<select name="attr_appearance">
							<option value="-24">Horrific (-6)</option>
							<option value="-20">Monstrous (-5)</option>
							<option value="-16">Hideous (-4)</option>
							<option value="-8">Ugly (-2)</option>
							<option value="-4">Unattractive (-1)</option>
							<option value="0" selected="selected">Average</option>
							<option value="4">Attractive (+1)</option>
							<option value="12">Handsome (+4/2)</option>
							<option value="16">Very Handsome (+6/2)</option>
							<option value="20">Transcendent (+8/2)</option>
						</select>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_appearance_pts" value="@{appearance}" disabled="disabled" />
					</div>
				</div>
			</div>
		</div>
		
		
		<!-- _____ _____ ADVENTAGES BOX _____ _____ -->
		<!-- this box uses the identifier "traits" for backwards compatibility -->

		<div class="sheet-box sheet-traits">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Advantages</div>
					<div class="sheet-cell sheet-col1">
						<div class="sheet-popup">CR</div>
						<span class="sheet-tooltip">
							Control Rating
							<br />
							<table>
								<tbody>
									<tr><td>6 or less</td><td>2x</td></tr>
									<tr><td>9 or less</td><td>1.5x</td></tr>
									<tr><td>12 or less</td><td>1x</td></tr>
									<tr><td>15 or less</td><td>0.5x</td></tr>
								</tbody>
							</table>
						</span>
					</div>
					<div class="sheet-cell sheet-col2">Pts</div>
					<div class="sheet-cell sheet-col3">Ref</div>
				</div> <!-- .sheet-header -->
				
				<fieldset class="repeating_traits">
					<input class="sheet-toggle" type="checkbox" />
					<span class="sheet-checkbox"></span>
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col0">
							<input type="text" name="attr_name" title="@{repeating_traits_$X_name}" placeholder="Advantage Name" />
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="number" name="attr_control_rating" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col2">
							<input type="number" name="attr_points" placeholder="0" />
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="text" name="attr_ref" placeholder="0"/>
						</div>
					</div> <!-- .sheet-row -->
					<div class="sheet-row sheet-row-details">
						<div class="sheet-cell sheet-col0 sheet-label">
							Notes
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="text" name="attr_notes" title="@{repeating_traits_$X_notes}" "placeholder="notes"/>
						</div>
					</div> <!-- .sheet-row -->
				</fieldset> <!-- .repeating_traits -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-traits -->

		<div class="sheet-box sheet-traits">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Perks</div>
					<div class="sheet-cell sheet-col1">
						<div class="sheet-popup">CR</div>
						<span class="sheet-tooltip">
							Control Rating
							<br />
							<table>
								<tbody>
									<tr><td>6 or less</td><td>2x</td></tr>
									<tr><td>9 or less</td><td>1.5x</td></tr>
									<tr><td>12 or less</td><td>1x</td></tr>
									<tr><td>15 or less</td><td>0.5x</td></tr>
								</tbody>
							</table>
						</span>
					</div>
					<div class="sheet-cell sheet-col2">Pts</div>
					<div class="sheet-cell sheet-col3">Ref</div>
				</div> <!-- .sheet-header -->
				
				<fieldset class="repeating_perks">
					<input class="sheet-toggle" type="checkbox" />
					<span class="sheet-checkbox"></span>
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col0">
							<input type="text" name="attr_name" title="@{repeating_perks_$X_name}" placeholder="Perk Name"/>
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="number" name="attr_control_rating" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col2">
							<input type="number" name="attr_points" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="text" name="attr_ref" placeholder="0"/>
						</div>
					</div> <!-- .sheet-row -->
					<div class="sheet-row sheet-row-details">
						<div class="sheet-cell sheet-col0 sheet-label">
							Notes
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="text" name="attr_notes" title="@{repeating_traits_$X_notes}" "placeholder="notes"/>
						</div>
					</div> <!-- .sheet-row -->
				</fieldset> <!-- .repeating_perks -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-traits -->		

		<div class="sheet-box sheet-disadvantages">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Disadvantages</div>
					<div class="sheet-cell sheet-col1">
						<div class="sheet-popup">CR</div>
						<span class="sheet-tooltip">
							Control Rating
							<br />
							<table>
								<tbody>
									<tr><td>6 or less</td><td>2x</td></tr>
									<tr><td>9 or less</td><td>1.5x</td></tr>
									<tr><td>12 or less</td><td>1x</td></tr>
									<tr><td>15 or less</td><td>0.5x</td></tr>
								</tbody>
							</table>
						</span>
					</div>
					<div class="sheet-cell sheet-col2">Pts</div>
					<div class="sheet-cell sheet-col3">Ref</div>
				</div> <!-- .sheet-header -->
				<fieldset class="repeating_disadvantages">
					<input class="sheet-toggle" type="checkbox" />
					<span class="sheet-checkbox"></span>
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col0">
							<input type="text" name="attr_name" title="@{repeating_disadvantages_$X_name}" placeholder="Disadvantage Name"/>
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="number" name="attr_control_rating" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col2">
							<input type="number" name="attr_points" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="text" name="attr_ref" placeholder="0"/>
						</div>
					</div> <!-- .sheet-row -->
					<div class="sheet-row sheet-row-details">
						<div class="sheet-cell sheet-col0 sheet-label">
							Notes
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="text" name="attr_notes" title="@{repeating_disadvantages_$X_notes}" "placeholder="notes"/>
						</div>
					</div> <!-- .sheet-row -->
				</fieldset> <!-- .repeating_disadvantages -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-disadvantages -->
		
		<div class="sheet-box sheet-disadvantages"> <!-- Quirks -->
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Quirks</div>
					<div class="sheet-cell sheet-col1">
						<div class="sheet-popup">CR</div>
						<span class="sheet-tooltip">
							Control Rating
							<br />
							<table>
								<tbody>
									<tr><td>6 or less</td><td>2x</td></tr>
									<tr><td>9 or less</td><td>1.5x</td></tr>
									<tr><td>12 or less</td><td>1x</td></tr>
									<tr><td>15 or less</td><td>0.5x</td></tr>
								</tbody>
							</table>
						</span>
					</div>
					<div class="sheet-cell sheet-col2">Pts</div>
					<div class="sheet-cell sheet-col3">Ref</div>
				</div> <!-- .sheet-header -->
				<fieldset class="repeating_quirks">
					<input class="sheet-toggle" type="checkbox" />
					<span class="sheet-checkbox"></span>
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col0">
							<input type="text" name="attr_name" title="@{repeating_quirks_$X_name}" placeholder="Quirk Name"/>
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="number" name="attr_control_rating" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col2">
							<input type="number" name="attr_points" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="text" name="attr_ref" placeholder="0"/>
						</div>
					</div> <!-- .sheet-row -->
					<div class="sheet-row sheet-row-details">
						<div class="sheet-cell sheet-col0 sheet-label">
							Notes
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="text" name="attr_notes" title="@{repeating_quirks_$X_notes}" placeholder="notes"/>
						</div>
					</div> <!-- .sheet-row -->
				</fieldset> <!-- .repeating_disadvantages -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-disadvantages -->

		<div class="sheet-box sheet-racial">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Template Traits</div>
					<div class="sheet-cell sheet-col1">
						<div class="sheet-popup">CR</div>
						<span class="sheet-tooltip">
							Control Rating
							<br />
							<table>
								<tbody>
									<tr><td>6 or less</td><td>2x</td></tr>
									<tr><td>9 or less</td><td>1.5x</td></tr>
									<tr><td>12 or less</td><td>1x</td></tr>
									<tr><td>15 or less</td><td>0.5x</td></tr>
								</tbody>
							</table>
						</span>
					</div>
					<div class="sheet-cell sheet-col2">Pts</div>
					<div class="sheet-cell sheet-col3">Ref</div>
				</div> <!-- .sheet-header -->
				<fieldset class="repeating_racial">
					<input class="sheet-toggle" type="checkbox" />
					<span class="sheet-checkbox"></span>
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col0">
							<input type="text" name="attr_name" title="@{repeating_racial_$X_name}" placeholder="Template Trait Name"/>
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="number" name="attr_control_rating" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col2">
							<input type="number" name="attr_points" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="text" name="attr_ref" placeholder="0"/>
						</div>
					</div> <!-- .sheet-row -->
					<div class="sheet-row sheet-row-details">
						<div class="sheet-cell sheet-col0 sheet-label">
							Notes
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="text" name="attr_notes" title="@{repeating_racial_$X_notes}" placeholder="notes"/>
						</div>
					</div> <!-- .sheet-row -->
				</fieldset> <!-- .repeating_disadvantages -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-disadvantages -->
		
		<!-- _____ _____ POINT SUMMARY BOX _____ _____ -->
		
		<div class="sheet-box sheet-points">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">
						Point Summary
					</div>
				</div> <!-- .sheet-header -->
				<div class="sheet-row sheet-row-attributes">
					<div class="sheet-cell sheet-col0 sheet-label">
						Attributes
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_att_points" value="0" readonly="readonly" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-traits">
					<div class="sheet-cell sheet-col0 sheet-label">
						Advantages
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_advantages_points" readonly="readonly" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-traits">
					<div class="sheet-cell sheet-col0 sheet-label">
						Perks
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_perks_points" readonly="readonly" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-traits">
					<div class="sheet-cell sheet-col0 sheet-label">
						Disadvantages
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_disadvantages_points" readonly="readonly" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-traits">
					<div class="sheet-cell sheet-col0 sheet-label">
						Quirks
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_quirks_points" readonly="readonly" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-traits">
					<div class="sheet-cell sheet-col0 sheet-label">
						Template
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_racial_points" readonly="readonly" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-skills">
					<div class="sheet-cell sheet-col0 sheet-label">
						Skills
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_skill_points" disabled="disabled" value="@{skills_points} + @{techniques_points} + @{spells_points}" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-other">
					<div class="sheet-cell sheet-col0 sheet-label">
						Misc
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_misc_points" readonly="readonly" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-total sheet-hr">
					<div class="sheet-cell sheet-col0 sheet-label">
						Total
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_total_points" value="150" />
					</div>
				</div> <!-- .sheet-row -->					
				<div class="sheet-row sheet-row-total sheet-hr">
					<div class="sheet-cell sheet-col0 sheet-label">
						Exp
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_exp_points" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-unspent sheet-hr">
					<div class="sheet-cell sheet-col0 sheet-label">
						Unspent
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_unspent_points" disabled="disabled" value="(@{total_points} + @{exp_points}) - @{total_spent_points}" />
					</div>
				</div> <!-- .sheet-row -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-points -->

	</div> <!-- .sheet-tab2 -->


	<!-- ===== ===== ===== ===== SKILLS TAB ===== ===== ===== ===== -->
	<div class="sheet-tab3">

		<!-- _____ _____ SKILLS BOX _____ _____ -->
	
		<div class="sheet-box sheet-skills">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Skills</div>
					<div class="sheet-cell sheet-col8"></div>
					<div class="sheet-cell sheet-col1">TL</div>
					<div class="sheet-cell sheet-col2">Level</div>
					<div class="sheet-cell sheet-col3">Attr</div>
					<div class="sheet-cell sheet-col4">Diff</div>
					<div class="sheet-cell sheet-col5">Bonus</div>
					<div class="sheet-cell sheet-col6">Pts</div>
					<div class="sheet-cell sheet-col7">Ref</div>
				</div> <!-- .sheet-header -->
				<fieldset class="repeating_skills">
					<input class="sheet-toggle" type="checkbox" />
					<span class="sheet-checkbox"></span>
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col8">
							<button type="roll" value='@{wtype}&{template:GURPS} {{roll=[[3d6]]}} {{target= [[@{level} + @{modifier}]] }} {{success=[[ [[@{level} + @{modifier}]] +1]] }} {{rolltype=SKILL CHECK}} {{rollname=@{skillname} }} {{charactername=@{character_name}}}' />
						</div>
						<div class="sheet-cell sheet-col0">
							<input type="text" name="attr_skillname" title="@{repeating_skills_$X_skillname}" placeholder="Skill Name"/>
						</div>
						
						<div class="sheet-cell sheet-col1">
							<input type="text" name="attr_tl" placeholder="@{tldefined}"/>
						</div>
						<div class="sheet-cell sheet-col2">
							<input type="text" name="attr_level" disabled="disabled" value="[[@{difficulty}*1]]"/>
						</div>
						<div class="sheet-cell sheet-col3">
							<select name="attr_base">
								<option value="@{strength}">ST</option>
								<option value="@{dexterity}">DX</option>
								<option value="@{intelligence}">IQ</option>
								<option value="@{health}">HT</option>
								<option value="@{willpower}">Will</option>
								<option value="@{perception}">Per</option>
								<option value="10">10</option>
							</select>
						</div>
						<div class="sheet-cell sheet-col4">
							<select name="attr_difficulty">
								<option value="-1 + @{base} + @{bonus} + (floor((@{points} * 0.25) + 2) * ceil( ( ( @{points} - 2 ) + abs( @{points} - 2) ) / 256 ) + @{points} * abs( ceil( ( ( @{points} - 2 ) + abs( @{points} - 2) ) / 256 ) - 1 ) * abs( ceil( ( ( @{points} - 2 ) + abs( @{points} - 2) ) / 256 ) - 1 ))">E</option>
								<option value="-2 + @{base} + @{bonus} + (floor((@{points} * 0.25) + 2) * ceil( ( ( @{points} - 2 ) + abs( @{points} - 2) ) / 256 ) + @{points} * abs( ceil( ( ( @{points} - 2 ) + abs( @{points} - 2) ) / 256 ) - 1 ) * abs( ceil( ( ( @{points} - 2 ) + abs( @{points} - 2) ) / 256 ) - 1 ))">A</option>
								<option value="-3 + @{base} + @{bonus} + (floor((@{points} * 0.25) + 2) * ceil( ( ( @{points} - 2 ) + abs( @{points} - 2) ) / 256 ) + @{points} * abs( ceil( ( ( @{points} - 2 ) + abs( @{points} - 2) ) / 256 ) - 1 ) * abs( ceil( ( ( @{points} - 2 ) + abs( @{points} - 2) ) / 256 ) - 1 ))">H</option>
								<option value="-4 + @{base} + @{bonus} + (floor((@{points} * 0.25) + 2) * ceil( ( ( @{points} - 2 ) + abs( @{points} - 2) ) / 256 ) + @{points} * abs( ceil( ( ( @{points} - 2 ) + abs( @{points} - 2) ) / 256 ) - 1 ) * abs( ceil( ( ( @{points} - 2 ) + abs( @{points} - 2) ) / 256 ) - 1 ))">VH</option>
								<option value="-4 + @{base} + @{bonus} + (floor( (floor( @{points} / 3) * 0.25) + 2) * ceil( ( ( floor( @{points} / 3) - 2 ) + abs( floor( @{points} / 3) - 2) ) / 256 ) + floor( @{points} / 3) * abs( ceil( ( ( floor( @{points} / 3) - 2 ) + abs( floor( @{points} / 3) - 2) ) / 256 ) - 1 ) * abs( ceil( ( ( floor( @{points} / 3) - 2 ) + abs( floor( @{points} / 3) - 2) ) / 256 ) - 1 ))">WC</option>
							</select>
						</div>
						<div class="sheet-cell sheet-col5">
							<input type="number" name="attr_bonus" value="0" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col6">
							<input type="number" name="attr_points" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col7">
							<input type="text" name="attr_ref" placeholder="0"/>
						</div>
					</div> <!-- .sheet-row -->
					<div class="sheet-row sheet-row-details">
						<div class="sheet-cell sheet-col0 sheet-label">
							Notes
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="text" name="attr_notes" title="@{repeating_skills_$X_notes}" placeholder="notes"/>
						</div>
					</div> <!-- .sheet-row -->
				</fieldset> <!-- .repeating_skills -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-skills -->


		<!-- _____ _____ TECHNIQUES BOX _____ _____ -->
		
		<div class="sheet-box sheet-techniques">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Techniques</div>
					<div class="sheet-cell sheet-col1">Parent</div>
					<div class="sheet-cell sheet-col2">Min</div>
					<div class="sheet-cell sheet-col3">Max</div>
					<div class="sheet-cell sheet-col4">Level</div>
					<div class="sheet-cell sheet-col5">Cost</div>
					<div class="sheet-cell sheet-col6">Bonus</div>
					<div class="sheet-cell sheet-col7">Pts</div>
					<div class="sheet-cell sheet-col8">Ref</div>
				</div> <!-- .sheet-header -->
				<fieldset class="repeating_techniques">
					<input class="sheet-toggle" type="checkbox" />
					<span class="sheet-checkbox"></span>
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col0">
							<input type="text" name="attr_name" title="@{repeating_techniques_$X_name}" placeholder="Technique Name"/>
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="text" name="attr_parent" placeholder="Parent Skill Name"/>
						</div>
						<div class="sheet-cell sheet-col2">
							<input type="number" name="attr_min" value="0" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="number" name="attr_max" value="0" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col4">
							<input type="text" name="attr_level" disabled="disabled" value="@{min} + floor(@{points} / @{points_per_level}) + @{bonus}"/>
						</div>
						<div class="sheet-cell sheet-col5">
							<input type="number" name="attr_points_per_level" value="1" />
						</div>
						<div class="sheet-cell sheet-col6">
							<input type="number" name="attr_bonus" value="0" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col7">
							<input type="number" name="attr_points" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col8">
							<input type="text" name="attr_ref" placeholder="0"/>
						</div>
					</div> <!-- .sheet-row -->
					<div class="sheet-row sheet-row-details">
						<div class="sheet-cell sheet-col0 sheet-label">
							Notes
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="text" name="attr_notes" title="@{repeating_techniques_$X_notes}" placeholder="notes"/>
						</div>
					</div> <!-- .sheet-row -->
				</fieldset> <!-- .repeating_skills -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-skills -->
	
	</div> <!-- .sheet-tab3 -->


	<!-- ===== ===== ===== ===== COMBAT TAB ===== ===== ===== ===== -->
	<div class="sheet-tab4">

		


		<!-- _____ _____ ACTIVE DEFENSE BOX _____ _____ -->
	
		<div class="sheet-box sheet-active-defense">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Active Defenses</div>
					<div class="sheet-cell sheet-col1">Type</div>
					<div class="sheet-cell sheet-col2">
						<div class="sheet-popup">Info</div>
						<span class="sheet-tooltip">
							<strong>F</strong>: this is a fencing weapon.
							<br />
							<strong>U</strong>: the weapon is unbalanced. You cannot use it to<br />
							parry if you've already attacked with it this turn<br /> (and vice versa).
						</span>
					</div>
					<div class="sheet-cell sheet-col3">Skill</div>
				</div> <!-- .sheet-header -->
				<div class="sheet-row sheet-row-stats sheet-row-standard">
					<div class="sheet-cell sheet-col4">
					<button type="roll" value='@{wtype}&{template:GURPS} {{roll= [[3d6]] }} {{target= [[@{current_dodge} + @{modifier}]] }} {{success=[[ [[@{current_dodge} + @{modifier}]] +1]] }} {{rolltype=ACTIVE DEFENSE}} {{rollname=Dodge}} {{charactername=@{character_name}}}' />
					</div>
					<div class="sheet-cell sheet-col0">Dodge</div>
					<div class="sheet-cell sheet-col1">Dodge</div>
					<div class="sheet-cell sheet-col2"></div>
					<div class="sheet-cell sheet-col3"><input type="text" name="attr_ad_dodge_skill" value="@{current_dodge}" disabled="disabled" /></div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-stats sheet-row-standard">
					<div class="sheet-cell sheet-col4">
					<button type="roll" value='@{wtype}&{template:GURPS} {{roll= [[3d6]] }} {{target= [[@{current_dodge} + @{modifier} + 3]] }} {{success=[[ [[@{current_dodge} + @{modifier} + 4]] }} {{rolltype=ACTIVE DEFNSE}} {{rollname=Dodge & Retreat}} {{charactername=@{character_name}}}' />
					</div>
					<div class="sheet-cell sheet-col0">Dodge and Retreat</div>
					<div class="sheet-cell sheet-col1">Dodge</div>
					<div class="sheet-cell sheet-col2"></div>
					<div class="sheet-cell sheet-col3"><input type="text" name="attr_ad_dodge_skill" value="@{current_dodge} + 3" disabled="disabled" /></div>
				</div> <!-- .sheet-row -->
				<fieldset class="repeating_defense">
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col4">
							<button type="roll" value='@{wtype}&{template:GURPS} {{roll= [[3d6]] }} {{target= [[@{skill} + @{modifier}]] }} {{success=[[ [[@{skill} + @{modifier}]] +1]] }} {{rolltype=ACTIVE DEFNSE}} {{rollname=@{name} @{type} }} {{charactername=@{character_name}}}' />
						</div>		
					<div class="sheet-cell sheet-col0">
							<input type="text" name="attr_name" title="@{repeating_defense_$X_name}" placeholder="Active Defense Name"/>
						</div>
						<div class="sheet-cell sheet-col1">
							<select name="attr_type">
								<option>Dodge</option>
								<option>Parry</option>
								<option>Block</option>
								<option>Magic</option>
								<option>Other</option>
							</select>
						</div>
						<div class="sheet-cell sheet-col2">
							<input type="text" name="attr_info" placeholder="F/U"/>
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="text" name="attr_skill" placeholder="0"/>
						</div>

					</div> <!-- .sheet-row -->
				</fieldset> <!-- .repeating_defense -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-active-defense -->

		<div class="sheet-box sheet-ranged-attacks">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Weapon</div>
					<div class="sheet-cell sheet-col1">
						<div class="sheet-popup">Range/Reach</div>
						<span class="sheet-tooltip">
							See page 269.
						</span>
					</div>
					<div class="sheet-cell sheet-col2">
						<div class="sheet-popup">Acc</div>
						<span class="sheet-tooltip">
							Add Accuracy to your skill if you took an Aim maneuver on the turn<br />
							prior to your attack. If the weapon has a built-in scope, the<br />
							bonus for this appears as a	separate modifier after the <br />
							weapons base Acc; e.g., 7+2.
						</span>
					</div>
					<div class="sheet-cell sheet-col3">
						<div class="sheet-popup">RoF</div>
						<span class="sheet-tooltip">
							Rate of Fire
							<br />
							The maximum number of shots that can be fired in <br />
							one turn (by a regular person).
							<br />
							The minimum number of shots is 1.
							<br /><br />
							<strong>!</strong>: minimum RoF is 1/4 of the maximum, rounded up.
							<br />
							<strong>mxn</strong>: fires the first number of shots, which each then split<br />
							into the second number (eg. shotguns)
							<br />
							<strong>Jet</strong>: shoots a continuous stream of fluid. See page 106.
						</span>
					</div>
					<div class="sheet-cell sheet-col4">
						<div class="sheet-popup">Shots</div>
						<span class="sheet-tooltip">
							The number of shots that can be fired before the weapon must be reloaded.
							<br />
							The parenthetical number indicates the number of 1 second ready maneuvers<br />
							required to reload the weapon.
							<br />
							<strong>T</strong>: the weapon is thrown. To "reload" it, pick it up.
							<br />
							<strong>i</strong>: you must load the shots individually. the listed time<br />
							is for each shot.
						</span>
					</div>
					<div class="sheet-cell sheet-col5">
						<div class="sheet-popup">ST</div>
						<span class="sheet-tooltip">
							The minimum Strength required to use the weapon properly
							<br />
							If you try to use a weapon that requires more ST than you have, 
							<br />
							you will be at -1 to weapon skill per point of ST you lack
						</span>
					</div>
					<div class="sheet-cell sheet-col6">
					<div class="sheet-popup">Bulk</div>
					<span class="sheet-tooltip">
							 A measure of the weapons size and handiness. Bulk<br />
							 modifies your weapon skill when you take a<br />
							 Move and Attack maneuver (see Move and Attack, p. 365).<br />
							 It also serves as a penalty to Holdout skill when you<br />
							 attempt to conceal the weapon.
						</span>
					</div>
					<div class="sheet-cell sheet-col7">
						<div class="sheet-popup">Rcl</div>
						<span class="sheet-tooltip">
							When firing at RoF 2+, every full multiple of Recoil<br />
							by which you make your attack roll means you score<br />
							one extra hit, to a maximum number of hits equal<br />
							to total shots fired. See page 373.
						</span>
					</div>
					<div class="sheet-cell sheet-col8">Damage</div>
					<div class="sheet-cell sheet-col9">
						<div class="sheet-popup">Type</div>
						<span class="sheet-tooltip">
							<table>
								<thead>
									<tr>
										<th>Abbr</th>
										<th>Multiplier</th>
										<th>Name</th>
									</tr>
								</thead>
								<tbody>
									<tr><td>cut</td> <td>x1.5</td><td>Cutting</td></tr>
									<tr><td>imp</td> <td>x2.0</td><td>Impaling</td></tr>
									<tr><td>cr</td>  <td>x1.0</td><td>Crushing</td></tr>
									<tr><td>pi-</td> <td>x0.5</td><td>Small Piercing</td></tr>
									<tr><td>pi</td>  <td>x1.0</td><td>Piercing</td></tr>
									<tr><td>pi+</td> <td>x1.5</td><td>Large Piercing</td></tr>
									<tr><td>pi++</td><td>x2.0</td><td>Huge Piercing</td></tr>
									<tr><td>aff</td> <td>-</td><td>Affliction</td></tr>
									<tr><td>burn</td><td>x1.0</td><td>Burning</td></tr>
									<tr><td>cor</td> <td>x1.0</td><td>Corrosion</td></tr>
									<tr><td>fat</td> <td>x1.0</td><td>Fatigue</td></tr>
									<tr><td>tox</td> <td>x1.0</td><td>Toxic</td></tr>
									<tr><td>spec</td><td>-</td><td>Special</td></tr>
								</tbody>
							</table>
						</span>
					</div>
					<div class="sheet-cell sheet-col10">Skill</div>
				</div> <!-- .sheet-header -->
				<fieldset class="repeating_ranged">
					<input class="sheet-toggle" type="checkbox" />
					<span class="sheet-checkbox"></span>
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col11">
							<button type="roll" name="attr_weaponroll" value="&{template:GURPS} {{roll= [[3d6]] }} @{vs} {{target= [[@{skill} + @{modifier}]] }} {{charactername=@{character_name} }} {{rolltype=ATTACK}} {{rollname=@{weaponname}}} {{damagetype=@{type} }} {{woundmod=@{wound_modifier} }} {{damageroll=[[@{damage}]]}} {{hit-loc=[[ @{calledshot_check} ]] }} {{critbody=[[ @{critbodytable} ]] }} {{crithead=[[ @{critheadtable} ]] }} {{success=([[@{skill} + (@{modifier} +1))]]}}" />
						</div>
						<div class="sheet-cell sheet-col0">
							<input type="text" name="attr_weaponname" title="@{repeating_ranged_$X_weaponname}" placeholder="Weapon Name"/>
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="text" name="attr_range" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col2">
							<input type="text" name="attr_acc" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="text" name="attr_rof" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col4">
							<input type="text" name="attr_shots" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col5">
							<input type="text" name="attr_minweaponST" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col6">
							<input type="text" name="attr_bulk" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col7">
							<input type="text" name="attr_recoil" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col8">
							<input type="text" name="attr_damage" placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col9">
							<select name="attr_type">
								<option value="Cutting (cut)">cut</option>
								<option value="Impaling (imp)">imp</option>
								<option value="Crushing (cr)">cr</option>
								<option value="Small Piercing (pi-)">pi-</option>
								<option value="Piercing (pi)">pi</option>
								<option value="Large Piercing (pi+)">pi+</option>
								<option value="Huge Piercing (pi++)">pi++</option>
								<option value="Burning (burn)">burn</option>
								<option value="Corrosion (cor)">cor</option>
								<option value="Fatigue (fat)">fat</option>
								<option value="Toxic (tox)">tox</option>
							</select>
						</div>
						<div class="sheet-hidden"><input type="number" name="attr_wound_modifier" value="0" readonly="readonly"/></div>
						<div class="sheet-cell sheet-col10">
							<input type="text" name="attr_skill" placeholder="0"/>
						</div>

					</div> <!-- .sheet-row -->
					<div class="sheet-row sheet-row-details">
						<div class="sheet-cell sheet-col0 sheet-label">
							Notes
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="text" name="attr_notes" title="@{repeating_ranged_$X_notes}" placeholder="notes"/>
						</div>
					</div> <!-- .sheet-row -->
					
				</fieldset> <!-- .repeating_ranged -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-ranged-attacks -->
		
		<!-- _____ _____ HIT LOCATION BOX _____ _____ -->
		
		<div class="sheet-box sheet-DRLoadout">
			<input type="checkbox" value="1" name="attr_loadoutchoice" checked="checked" class="sheet-hidden sheet-loadoutchoice"/>
<input type="checkbox" value="2" name="attr_loadoutchoice" class="sheet-hidden sheet-loadoutchoice"/>
<input type="checkbox" value="3" name="attr_loadoutchoice" class="sheet-hidden sheet-loadoutchoice">			
				
			<div class="sheet-loadoutchoice-content sheet-loadoutchoice1">
			<div class="sheet-box sheet-damage-reduction">
				<div class="sheet-table">
				<div class="sheet-header sheet-row-title">
					<div class="sheet-cell sheet-col0">
						Hit Location A
					</div>
				</div> <!-- .sheet-header -->
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Loc.</div>
					<div class="sheet-cell sheet-col1"><div class="sheet-popup">DR</div><span class="sheet-tooltip">Split DR for <br />layered protection</span>
					</div>
					<div class="sheet-cell sheet-col4"><div class="sheet-popup">DB</div><span class="sheet-tooltip">Defense Bonus<br />for active defenses</span>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-skull">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Skull</div>
						<span class="sheet-tooltip">Penalty: -7<br />Skull has<br />inherent DR 2</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_skull1_dr_max" value="2" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_skull1_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_skull1_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-face">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Face</div>
						<span class="sheet-tooltip">Penalty: -5</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_face1_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_face1_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_face1_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-eyes">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Eyes</div>
						<span class="sheet-tooltip">Penalty: -9</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_eyes1_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_eyes1_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_eyes1_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-eyes">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Neck</div>
						<span class="sheet-tooltip">Penalty: -5</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_neck1_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_neck1_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_neck1_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-r-arm">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Arms</div>
						<span class="sheet-tooltip">Penalty: -2</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_arms1_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_arms1_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_arms1_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-hands">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Hands</div>
						<span class="sheet-tooltip">Penalty: -4</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_hands1_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_hands1_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_hands1_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-torso">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Torso</div>
						<span class="sheet-tooltip">Penalty: 0</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_torso1_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_torso1_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_torso1_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-vitals">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Vitals</div>
						<span class="sheet-tooltip">Penalty: -3</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_vitals1_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_vitals1_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_vitals1_db" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-groind">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Groin</div>
						<span class="sheet-tooltip">Penalty: -3</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_groin1_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_groin1_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_groin1_db" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-l-leg">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Legs</div>
						<span class="sheet-tooltip">Penalty: -2</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_legs1_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_legs1_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_legs1_db" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-feet">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Feet</div>
						<span class="sheet-tooltip">Penalty: -4</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_feet1_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_feet1_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_feet1_db" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-r-foot">
					<div class="sheet-cell sheet-col0 sheet-label">
						Area
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_area1_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_area1_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_area1_db" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<fieldset class="repeating_location1">
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col0 sheet-label">
							<input type="text" name="attr_name" />
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="number" name="attr_dr1_max" value="0" />
						</div>
						<div class="sheet-cell sheet-col2">
							/
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="number" name="attr_dr1" value="0" />
						</div>
						<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_db1" value="0" />
					</div>
					</div> <!-- .sheet-row -->
				</fieldset>
			</div> <!-- .sheet-table -->
			</div>
			</div> <!-- DR Loadout Choice 1 -->
			<div class="sheet-loadoutchoice-content sheet-loadoutchoice2">
						<div class="sheet-box sheet-damage-reduction">
				<div class="sheet-table">
				<div class="sheet-header sheet-row-title">
					<div class="sheet-cell sheet-col0">
						Hit Location B
					</div>
				</div> <!-- .sheet-header -->
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Loc.</div>
					<div class="sheet-cell sheet-col1"><div class="sheet-popup">DR</div><span class="sheet-tooltip">Split DR for <br />layered protection</span>
					</div>
					<div class="sheet-cell sheet-col4"><div class="sheet-popup">DB</div><span class="sheet-tooltip">Defense Bonus<br />for active defenses</span>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-skull">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Skull</div>
						<span class="sheet-tooltip">Penalty: -7<br />Skull has<br />inherent DR 2</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_skull2_dr_max" value="2" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_skull2_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_skull2_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-face">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Face</div>
						<span class="sheet-tooltip">Penalty: -5</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_face2_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_face2_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_face2_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-eyes">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Eyes</div>
						<span class="sheet-tooltip">Penalty: -9</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_eyes2_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_eyes2_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_eyes2_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-eyes">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Neck</div>
						<span class="sheet-tooltip">Penalty: -5</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_neck2_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_neck2_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_neck2_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-r-arm">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Arms</div>
						<span class="sheet-tooltip">Penalty: -2</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_arms2_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_arms2_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_arms2_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-hands">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Hands</div>
						<span class="sheet-tooltip">Penalty: -4</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_hands2_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_hands2_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_hands2_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-torso">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Torso</div>
						<span class="sheet-tooltip">Penalty: 0</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_torso2_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_torso2_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_torso2_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-vitals">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Vitals</div>
						<span class="sheet-tooltip">Penalty: -3</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_vitals2_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_vitals2_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_vitals2_db" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-groind">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Groin</div>
						<span class="sheet-tooltip">Penalty: -3</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_groin2_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_groin2_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_groin2_db" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-l-leg">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Legs</div>
						<span class="sheet-tooltip">Penalty: -2</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_legs2_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_legs2_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_legs2_db" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-feet">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Feet</div>
						<span class="sheet-tooltip">Penalty: -4</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_feet2_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_feet2_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_feet2_db" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-r-foot">
					<div class="sheet-cell sheet-col0 sheet-label">
						Area
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_area2_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_area2_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_area2_db" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<fieldset class="repeating_location2">
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col0 sheet-label">
							<input type="text" name="attr_name" />
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="number" name="attr_dr2_max" value="0" />
						</div>
						<div class="sheet-cell sheet-col2">
							/
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="number" name="attr_dr2" value="0" />
						</div>
						<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_db2" value="0" />
					</div>
					</div> <!-- .sheet-row -->
				</fieldset>
			</div> <!-- .sheet-table -->
			</div>
			</div>
			<div class="sheet-loadoutchoice-content sheet-loadoutchoice3">
			<div class="sheet-box sheet-damage-reduction">
				<div class="sheet-table">
				<div class="sheet-header sheet-row-title">
					<div class="sheet-cell sheet-col0">
						Hit Location C
					</div>
				</div> <!-- .sheet-header -->
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Loc.</div>
					<div class="sheet-cell sheet-col1"><div class="sheet-popup">DR</div><span class="sheet-tooltip">Split DR for <br />layered protection</span>
					</div>
					<div class="sheet-cell sheet-col4"><div class="sheet-popup">DB</div><span class="sheet-tooltip">Defense Bonus<br />for active defenses</span>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-skull">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Skull</div>
						<span class="sheet-tooltip">Penalty: -7<br />Skull has<br />inherent DR 2</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_skull3_dr_max" value="2" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_skull3_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_skull3_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-face">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Face</div>
						<span class="sheet-tooltip">Penalty: -5</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_face3_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_face3_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_face3_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-eyes">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Eyes</div>
						<span class="sheet-tooltip">Penalty: -9</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_eyes3_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_eyes3_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_eyes3_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-eyes">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Neck</div>
						<span class="sheet-tooltip">Penalty: -5</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_neck3_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_neck3_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_neck3_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-r-arm">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Arms</div>
						<span class="sheet-tooltip">Penalty: -2</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_arms3_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_arms3_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_arms3_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-hands">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Hands</div>
						<span class="sheet-tooltip">Penalty: -4</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_hands3_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_hands3_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_hands3_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-torso">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Torso</div>
						<span class="sheet-tooltip">Penalty: 0</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_torso3_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_torso3_dr" value="0"/>
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_torso3_db" value="0"/>
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-vitals">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Vitals</div>
						<span class="sheet-tooltip">Penalty: -3</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_vitals3_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_vitals3_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_vitals3_db" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-groind">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Groin</div>
						<span class="sheet-tooltip">Penalty: -3</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_groin3_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_groin3_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_groin3_db" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-l-leg">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Legs</div>
						<span class="sheet-tooltip">Penalty: -2</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_legs3_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_legs3_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_legs3_db" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-feet">
					<div class="sheet-cell sheet-col0 sheet-label"><div class="sheet-popup">
						Feet</div>
						<span class="sheet-tooltip">Penalty: -4</span>
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_feet3_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_feet3_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_feet3_db" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<div class="sheet-row sheet-row-r-foot">
					<div class="sheet-cell sheet-col0 sheet-label">
						Area
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_area3_dr_max" value="0" />
					</div>
					<div class="sheet-cell sheet-col2">
						/
					</div>
					<div class="sheet-cell sheet-col3">
						<input type="number" name="attr_area3_dr" value="0" />
					</div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_area3_db" value="0" />
					</div>
				</div> <!-- .sheet-row -->
				<fieldset class="repeating_location3">
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col0 sheet-label">
							<input type="text" name="attr_name" />
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="number" name="attr_dr3_max" value="0" />
						</div>
						<div class="sheet-cell sheet-col2">
							/
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="number" name="attr_dr3" value="0" />
						</div>
						<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_db3" value="0" />
					</div>
					</div> <!-- .sheet-row -->
				</fieldset>
			</div> <!-- .sheet-table -->
			</div>
			</div>
		</div>

		

		
		


		<!-- =========== Combat Modifiers BOX ============== -->
		<div class="sheet-box sheet-combat-modifiers">
			<div class="sheet-table">
						<input type="checkbox" class="sheet-arrow" name="attr_range-modifier-toggle" checked/><span></span>
						<!-- =====ROW 0========-->
						<div class="sheet-row sheet-header"><div class="sheet-cell sheet-col0">COMBAT MODIFIERS</div></div>
						<div class="sheet-hold">
						<!-- =====ROW 10========-->	
						<div class="sheet-row sheet-inputs">
							<div class="sheet-cell sheet-col0"><input type="number" name="attr_totalrnagedmodifiers"  value="@{attackerman} + @{tgtsize} + @{tgtrange} + @{tgtspeed} + @{tgtlightcover} + @{tgtpart} + @{tgtpost} + @{hitlocationmodifier} + @{tgtbehind} + @{condition} + @{partialvision} + @{rvisibility} + @{closecbt} + @{damweapon} + @{rshock} + @{rbadfoot} + @{rminordistract} + @{rmajordistract} + @{rstdeficit} + @{aiming} + @{xaim} + @{rbraced} + @{popupatk} + @{rapidfire} + @{rdualweaponprime} + @{rdualweaponoff} + @{oppfire} + @{opphexes} + @{laser} + @{scope} + @{vtgt} + @{unfamiliar}" disabled="disabled"/></div>
						</div>
						<!-- =====ROW 20========-->
						<div class="sheet-row sheet-inputs">
							<div class="sheet-cell sheet-col22"><div class="sheet-popup">Total Visibility Mod:</div><span class="sheet-tooltip">Combined visibility penalties cannot exceed -10<br />If any modifier marked with an asterisk (*) applies, adjusted<br />skill after all modifiers cannot exceed 9.</span></div><div class="sheet-cell sheet-col23"><input type="number" name="attr_rangedvisibility" value="@{partialvision} + @{rvisibility}" disabled="disabled" /></div>
							
							<div class="sheet-cell sheet-col24"><div class="sheet-popup">Total Speed/Range Mod:</div><span class="sheet-tooltip">This is the sum of target's size modifier<br />The range modifier and,<br />the target speed modifier.</span></div><div class="sheet-cell sheet-col25"><input type="number" name="attr_speedrangesize" value="@{tgtsize} + @{tgtrange} + @{tgtspeed}" disabled="disabled" /></div>
							
							<div class="sheet-cell sheet-col26"><div class="sheet-popup">Target Situation:</div><span class="sheet-tooltip">This is the sum of all other modifiers.</span></div><div class="sheet-cell sheet-col27"><input type="number" name="attr_tgtsituation" value="@{tgtlightcover} + @{tgtpart} + @{tgtpost} + @{hitlocationmodifier} + @{tgtbehind}" disabled="disabled" /></div>
						</div>
							<!-- =====ROW 30========-->
							<div class="sheet-header"> <!--begin header row -->
								<div class="sheet-cell sheet-col9"><div class="sheet-popup">Speed / Range</div>
								<span class="sheet-tooltip">Choose target size, range, and speed.
								</span></div>
							</div>
							<!-- =====ROW 40========-->
							<div class="sheet-row sheet-inputs">
								<div class="sheet-cell sheet-col41"><div class="sheet-popup">Target Size</div><span class="sheet-tooltip">Select target size
																															<br /><strong>Round</strong> to nearest measurement.</span>
																															</div><div class="sheet-cell sheet-col42">
																																<select name="attr_tgtsize">
																																	<option value="-15">1/5"</option>
																																	<option value="-14">1/3"</option>
																																	<option value="-13">1/2"</option>
																																	<option value="-12">2/3"</option>
																																	<option value="-11">1"</option>
																																	<option value="-10">1.5"</option>
																																	<option value="-9">2"</option>
																																	<option value="-8">3"</option>
																																	<option value="-7">5"</option>
																																	<option value="-6">8"</option>
																																	<option value="-5">1 ft</option>
																																	<option value="-4">1.5 ft</option>
																																	<option value="-3">2 ft</option>
																																	<option value="-2">1 yd</option>
																																	<option value="-1">1.5 yd</option>
																																	<option selected value="0">2 yd (default)</option>
																																	<option value="1">3 yd</option>
																																	<option value="2">5 yd</option>
																																	<option value="3">7 yd</option>
																																	<option value="4">10 yd</option>
																																	<option value="5">15 yd</option>
																																	<option value="6">20 yd</option>
																																	<option value="7">30 yd</option>
																																	<option value="8">50 yd</option>
																																	<option value="9">70 yd</option>
																																	<option value="10">100 yd</option>
																																	<option value="11">150 yd</option>
																																	<option value="12">200 yd</option>
																																	<option value="13">300 yd</option>
																																	<option value="14">500 yd</option>
																																	<option value="15">700 yd</option>
																																	<option value="16">1,000 yd</option>
																																	<option value="17">1,500 yd</option>
																																	<option value="18">2,000 yd (1 mile)</option>
																																	<option value="-19">3,000 yd</option>
																																	<option value="-20">5,000 yd (2.5 miles)</option>
																																</select></div>
																																
								<div class="sheet-cell sheet-col43"><div class="sheet-popup">Target Range</div><span class="sheet-tooltip">Select range to target in yards.<br /><strong>Round</strong> to nearest range.</span></div>
								<div class="sheet-cell sheet-col44"><select name="attr_tgtrange">
																		<option selected value="0">2 yd (default)</option>
																		<option value="-1">3 yd</option>
																		<option value="-2">5 yd</option>
																		<option value="-3">7 yd</option>
																		<option value="-4">10 yd</option>
																		<option value="-5">15 yd</option>
																		<option value="-6">20 yd</option>
																		<option value="-7">30 yd</option>
																		<option value="-8">50 yd</option>
																		<option value="-9">70 yd</option>
																		<option value="-10">100 yd</option>
																		<option value="-11">150 yd</option>
																		<option value="-12">200 yd</option>
																		<option value="-13">300 yd</option>
																		<option value="-14">500 yd</option>
																		<option value="-15">700 yd</option>
																		<option value="-16">1,000 yd</option>
																		<option value="-17">1,500 yd</option>
																		<option value="-18">2,000 yd (1 mile)</option>
																		<option value="-19">3,000 yd</option>
																		<option value="-20">5,000 yd (2.5 miles)</option>
																	</select></div>
								<div class="sheet-cell sheet-col45"><div class="sheet-popup">Target Speed</div><span class="sheet-tooltip">Select speed target in yards per second.<br /><strong>Round</strong> to nearest speed.</span></div>
								<div class="sheet-cell sheet-col46"><select name="attr_tgtspeed">
																		<option selected value="0">2 yd (default)</option>
																		<option value="-1">3 yd</option>
																		<option value="-2">5 yd</option>
																		<option value="-3">7 yd</option>
																		<option value="-4">10 yd</option>
																		<option value="-5">15 yd</option>
																		<option value="-6">20 yd</option>
																		<option value="-7">30 yd</option>
																		<option value="-8">50 yd</option>
																		<option value="-9">70 yd</option>
																		<option value="-10">100 yd</option>
																		<option value="-11">150 yd</option>
																		<option value="-12">200 yd</option>
																		<option value="-13">300 yd</option>
																		<option value="-14">500 yd</option>
																		<option value="-15">700 yd</option>
																		<option value="-16">1,000 yd</option>
																		<option value="-17">1,500 yd</option>
																		<option value="-18">2,000 yd (1 mile)</option>
																		<option value="-19">3,000 yd</option>
																		<option value="-20">5,000 yd (2.5 miles)</option>
																	</select></div>									
							</div>
							<!-- =====ROW 50========-->
							<div class="sheet-header"> <!--begin header row -->
								<div class="sheet-cell sheet-col50"><div class="sheet-popup">Target Situation<input type="number" name="attr_tgtsituation" value="@{tgtlightcover} + @{tgtpart} + @{tgtpost} + @{hitlocationmodifier} + @{tgtbehind}" disabled="disabled"/></div>
								<span class="sheet-tooltip">Choose target and conditions.
								</span></div>
							</div>
							<!-- =====ROW 60========--> 
							<div class="sheet-row sheet-inputs">
							<div class="sheet-cell sheet-col60"><div class="sheet-popup">Target Hit Location</div><span class="sheet-tooltip"> If the target has cover, you can<br />either choose to take no penalty<br />
															and roll hit location randomly<br />
															(shots that hit a covered location<br />
															always strike full cover, and hit<br />
															partial cover on 4-6 on 1d) or<br />
															target an exposed hit location<br />
															(add an extra -2 if only partly<br />
															exposed).</span></div><div class="sheet-cell sheet-col61">								
									<select name="attr_hitlocationchoice">
										<option value="21">Left Eye</option>
										<option value="22">Right Eye</option>
										<option value="23">Skull</option>
										<option value="24">Face</option>
										<option value="25">Right Leg</option>
										<option value="26">Right Arm</option>
										<option selected="true" value="27">Torso</option>
										<option value="28">Groin</option>
										<option value="29">Left Arm</option>
										<option value="30">Left Leg</option>
										<option value="31">Right Hand</option>
										<option value="32">Right Foot</option>
										<option value="33">Left Hand</option>
										<option value="34">Left Foot</option>
										<option value="35">Neck</option>
										<option value="36">Vitals</option>
										<option value="37">Armor Chink (torso)</option>
										<option value="38">Armor Chink (other)</option>
										<option value="39">Weapon (C)</option>
										<option value="40">Weapon (1)</option>
										<option value="41">Weapon (2+)</option>
									</select>
								</div>
								<div class="hidden"><input type="number" name="attr_hitlocationmodifier" readonly="readonly" value="0" /></div>
								<div class="sheet-cell sheet-col62"><div class="sheet-popup">Target Posture</div><span class="sheet-tooltip">
								 If attacker is at the same or lower elevation and farther away than his own<br />height, he attacks your torso as if it were half exposed (-2 to hit), and cannot<br />attack your groin, legs, or feet at all. If you also have your head down, he cannot<br />attack your neck, eyes, or face.</span></div>
								<div class="sheet-cell sheet-col63"><select name="attr_tgtpost">
								<option value="0" selected="true">Standing</option>
								<option value="-2">Crouching</option>
								<option value="-2">Kneeling</option>
								<option value="-2">Crawling</option>
								<option value="-2">Sitting</option>
								<option value="-2">Lying Down</option>
								</select></div>
								<div class="sheet-cell sheet-col64"><div class="sheet-popup">Target Behind Someone else</div><span class="sheet-tooltip">Target behind someone else:<br /> -4 per intervening figure<br />Choose number of figures.</span></div><div class="sheet-cell sheet-col65"><select name="attr_tgtbehind">
										<option selected value="0">0</option>
										<option value="-4">1</option>
										<option value="-8">2</option>
										<option value="-12">3</option>	
									</select>
								</div>
							</div> <!-- End Row 60 -->
							<!-- =====ROW 70========-->
							<div class="sheet-row sheet-inputs"> 
								<div class="sheet-cell sheet-col70"><input class="sheet-boolean" type="checkbox" name="attr_tgtlightcover" value='-2' /><span></span></div><div class="sheet-cell sheet-col71"><div class="sheet-popup">Light Cover</div><span class="sheet-tooltip">Shooting through light cover.</span></div>
								<div class="sheet-cell sheet-col72"><input class="sheet-boolean" type="checkbox" name="attr_tgtpart" value='-2' /><span></span></div><div class="sheet-cell sheet-col73"><div class="sheet-popup">Partly Exposed</div><span class="sheet-tooltip">Target is only partly exposed<br />ex. only half of the skull is exposed.</span></div>
							</div>
							<!-- =====ROW 80========--> 
							<div class="sheet-row sheet-header"> <!--begin header row -->
								<div class="sheet-cell sheet-col80"><div class="sheet-popup">Attacker Maneuver</div><span class="sheet-tooltip">Choose a maneuver.</span></div>
							</div>
							<!-- =====ROW 90========-->
							<div class="sheet-row sheet-inputs">
								<div class="sheet-cell sheet-col90"><div class="sheet-popup">Maneuver</div>
								<span class="sheet-tooltip">Choose a maneuver</span></div>
								<div class="sheet-cell sheet-col91"><div class="sheet-popup">Active Defense</div>
								<span class="sheet-tooltip">Active Defense Allowed</span></div>
								<div class="sheet-cell sheet-col92"><div class="sheet-popup">Move</div>
								<span class="sheet-tooltip">Movement Allowed</span></div>
							</div>
							<!-- =====ROW 100========-->
							<div class="sheet-row sheet-inputs">
								<div class="sheet-cell sheet-col100"><select name="attr_maneuver">
									<option value="Atk" selected="true">Attack</option>
									<option value="Aim">Aim</option>
									<option value="AoAmd">All-Out-Attack (Melee Determined)</option>
									<option value="AoAmdb">All-Out-Attack (Melee Double)</option>
									<option value="AoAmd">All-Out-Attack (Melee Feint)</option>
									<option value="AoAms">All-Out-Attack (Melee Strong)</option>
									<option value="AoArd">All-Out-Attack (Ranged Determined)</option>
									<option value="AoArs">
									All-Out-Attack (Ranged Suppression)</option>
									<option value="AoDid">All-Out-Defense (Increased Defense)</option>
									<option value="AoDdd">All-Out-Defense (Double Defense)</option>
									<option value="CPost">Change Posture</option>
									<option value="Conc">Concentrate</option>
									<option value="DN">Do Nothing</option>
									<option value="Eval">Evaluate</option>
									<option value="Fnt">Feint</option>
									<option value="Atkmv">Move and Attack</option>
									<option value="Mov">Move</option>
									<option value="Ready">Ready</option>
									<option value="Wait">Wait</option>
								</select>
								<span></span></div>
								<div class="sheet-cell sheet-col101"><input type="text" name="attr_activedefense" readonly="readonly" /></div>
								<div class="sheet-cell sheet-col102"><input type="text" name="attr_movement" readonly="readonly" /></div>
								
							</div>
							<!-- =====ROW 110========-->
							<div class="sheet-maneuverdescription">
							<div class="sheet-row sheet-mandescr">
								<div class="sheet-cell sheet-col110"><textarea name="attr_maneuverdescription"readonly="readonly" /></textarea></div>
							</div>
							</div>
							
							<!-- =====ROW 200========-->
							<div class="sheet-row sheet-header">
								<div class="sheet-cell sheet-col200"><div class="sheet-popup">ATTACKERS SITUATION</div><span class="sheet-tooltip">Enter all that apply</span></div>
							</div>
							<!-- =====ROW 300========-->
							<div class="sheet-row sheet-inputs">
								<div class="sheet-cell sheet-col300"><div class="sheet-popup">Afflictions</div><span class="sheet-tooltip">Choose from Condition<br />Monitor to the right</span></div>
								<div class="sheet-cell sheet-col301"><div class="sheet-popup">Partial Vision: Dark, Fog, Etc.</div><span class="sheet-tooltip"><b>Torches and Flashlights</b><br />A torch or flashlight reduces the<br />penalty to attack rolls for darkness.<br />Assume that any such light within line<br />of sight reduces the penalty from -10<br />(total darkness) to -3. Almost every<br />light source has a limited range or<br />radius  see the item description for details.</span></div>
								<div class="sheet-cell sheet-col302"><div class="sheet-popup">Visibility</div><span class="sheet-tooltip">Combined modifiers<br />cannot exceed -10.</span></div>
							</div>
							<!-- =====ROW 400========-->
							<div class="sheet-row sheet-inputs"> 
								<div class="sheet-cell sheet-col400">
									<select name="attr_condition">
									<option selected="true" value="0">None</option>
									<option value="-3">Coughing</option>
									<option value="-2">Drowsy</option>
									<option value="-2">Drunk</option>
									<option value="-3">Euphoria</option>
									<option value="-2">Nauseated</option>
									<option value="-2">Mod. Pain</option>
									<option value="-4">Svr. Pain</option>
									<option value="-6">Ter. Pain</option>
									<option value="-3">Sneezing</option>
									<option value="-1">Tipsy</option>
									<option value="-99">Choking</option>
									<option value="-99">Daze</option>
									<option value="-99">Ecstasy</option>
									<option value="-99">Hallucinating</option>
									<option value="-99">Paralysis</option>
									<option value="-5">Retching</option>
									<option value="-99">Seizure</option>
									<option value="-99">Unconscious</option>
									</select>
								</div>
								<div class="sheet-cell sheet-col401"><input type="number" name="attr_rpartialvision" value="0"/></div>
								<div class="sheet-cell sheet-col402"><select name="attr_rvisibility">
									<option value="0" selected="true">Normal</option>
									<option value="-10">Blind, tgt invisible, total darkness -10*</option>
									<option value="-6">Cannot see foe: -6*</option>
									<option value="-4">Can't see foe, but know his location w/in 1 yd: -4*</option>
									<option value="-2">Target has light concealment</option>
								</select>
								</div>
							</div>
							<!-- =====ROW 500========-->
							<div class="sheet-row sheet-inputs"> 	<div class="sheet-cell sheet-col500"><div class="sheet-popup">Close Combat</div><span class="sheet-tooltip">Close combat: a penalty equal<br />to the weapons Bulk statistic</span></div>
							<div class="sheet-cell sheet-col501"><select name="attr_closecbt"><option selected value="0">0</option>
							<option value="-1">-1</option>
							<option value="-2">-2</option>
							<option value="-3">-3</option>
							<option value="-4">-4</option>
							<option value="-5">-5</option>
							<option value="-6">-6</option>
							<option value="-7">-7</option>
							<option value="-8">-8</option>
							<option value="-9">-9</option>
							<option value="-10">-10</option>
							</select></div>
							<div class="sheet-cell sheet-col502"><div class="sheet-popup">Damaged Weapon</div><span class="sheet-tooltip">HP of injury received last<br />turn (maximum -4)</span></div><div class="sheet-cell sheet-col503"><select name="attr_damweapon">
							<option selected value="0">None</option>
							<option value="-1">1 HP</option>
							<option value="-2">2 HP</option>
							<option value="-3">3 HP</option>
							<option value="-4">4 HP</option>
							</select></div>
							<div class="sheet-cell sheet-col504"><div class="sheet-popup">Shock</div><span class="sheet-tooltip">Shock: -HP of injury received<br />last turn (maximum -4)</span></div>
							<div class="sheet-cell sheet-col505"><select name="attr_rshock">
							<option selected value="0">None</option>
							<option value="-1">1 HP</option>
							<option value="-2">2 HP</option>
							<option value="-3">3 HP</option>
							<option value="-4">4 HP</option>
							</select></div>
							<div class="sheet-cell sheet-col506"><input class="sheet-boolean" type="checkbox" name="attr_rbadfoot" value="-2" /><span></span></div><div class="sheet-cell sheet-col507"><div class="sheet-popup">Bad Footing</div><span class="sheet-tooltip">Bad footing: -2</span></div>
							<div class="sheet-cell sheet-col508"><div class="sheet-popup">Distracted</div><span class="sheet-tooltip">Minor distraction (e.g., <br />part of clothes on fire): -2</span></div>
							<div class="sheet-cell sheet-col509"><select name="attr_distracted">
							<option value="0" selected="true">None</option>
							<option value="-2">Minor</option>
							<option value="-3">Major</option>
							</select></div>
							</div> <!-- End input row -->
							<!-- =====ROW 600========-->
							<div class="sheet-row sheet-inputs">
								
								<div class="sheet-cell sheet-col602"><input class="sheet-boolean" type="checkbox" name="attr_rminordistract" value="-2" /><span></span></div><div class="sheet-cell sheet-col603"><div class="sheet-popup">Minor Distraction</div><span class="sheet-tooltip">Minor distraction (e.g., <br />part of clothes on fire): -2</span></div>
								<div class="sheet-cell sheet-col604"><input class="sheet-boolean" type="checkbox" name="attr_rmajordistract" value="-3" /><span></span></div><div class="sheet-cell sheet-col605"><div class="sheet-popup">Major Distraction</div><span class="sheet-tooltip">Major distraction (e.g., all clothes on <br />fire): -3 or more (GMs option)</span></div>
								<div class="sheet-cell sheet-col15"><div class="sheet-popup">ST Deficit</div><span class="sheet-tooltip">ST below that required for <br />weapon: -1 per point of deficit</span></div><div class="sheet-cell sheet-col5"><select name="attr_rstdeficit">
																	<option selected value="0">None</option>
																	<option value="-1">1</option>
																	<option value="-2">2</option>
																	<option value="-3">3</option>
																	<option value="-4">4</option>
																	<option value="-5">5</option>
																</select></div>
							</div>
							
							
							<div class="sheet header"><div class="sheet-popup">OTHER ACTIONS BY ATTACKER</div><span class="sheet-tooltip">Use check boxes and enter numbers for all<br />other actions taken by the attacker</span></div>
							<div class="sheet-row sheet-inputs"> <!-- begin input row 700-->
							
							<div class="sheet-cell sheet-col701"><input class="sheet-boolean" type="checkbox" name="attr_deceptiveattack" value='-2' /><span></span></div><div class="sheet-cell sheet-col702"><div class="sheet-popup">Deceptive Attack (Melee Only)</div><span class="sheet-tooltip">Deceptive Attack: -4 for a -2 penalty to foes defense</span></div>
							<div class="sheet-cell sheet-col5"><select name="attr_evaluate">
																	<option selected value="0">None</option>
																	<option value="1">1</option>
																	<option value="2">2</option>
																	<option value="3">3</option>
																</select></div><div class="sheet-cell sheet-col6"><div class="sheet-popup">Evaluate</div><span class="sheet-tooltip">Evaluate: +1 per turn (maximum +3)</span></div>
						</div>							
							<div class="sheet-row sheet-inputs"> <!--begin .sheet-input row 800-->
								<div class="sheet-cell sheet-col801"><input class="sheet-boolean" type="checkbox" name="attr_aiming" value="[[@{acc}*1]]" /><span></span></div><div class="sheet-cell sheet-col802"><div class="sheet-popup">Aim</div><span class="sheet-tooltip">Enter Acc of weapon and use checkbox when aiming.<br />Aimed for one turn +Accuracy of weapon</span></div><div class="sheet-cell sheet-col803"><input type="number" name="attr_acc" value="0"/></div>
								
								<div class="sheet-cell sheet-col805"><div class="sheet-popup">Called Shot Y:</div><span class="sheet-tooltip">Choose hit location you are shooting at.<br />If you choose to attack his weapon, see<br /><i> Striking at Weapons</i> p. 400</span></div><div class="sheet-cell sheet-col804"><input class="sheet-boolean" type="radio" name="attr_calledshot_check" value="@{hitlocationchoice}" /></div><div class="sheet-cell sheet-col805a"> N:</div><div class="sheet-cell sheet-col804"><input class="sheet-boolean" type="radio" name="attr_calledshot_check" value="@{hitlocationroll}" checked="true"/><span></span></div>
								
								<div class="sheet-cell sheet-col806"><input class="sheet-boolean" type="checkbox" name="attr_xaim" value="[[@{xacc}*1]]" /><span></span></div><div class="sheet-cell sheet-col807"><div class="sheet-popup">Extra Aim</div><span class="sheet-tooltip">Enter seconds of aiming.<br />Extra Aim: +1 for 2 seconds, +2 for 3+ seconds<br />Max aim bonus upto Acc of weapon.</span></div><div class="sheet-cell sheet-col808"><input type="number" name="attr_xacc" value="0"></div>
								
								<div class="sheet-cell sheet-col809"><input class="sheet-boolean" type="checkbox" name="attr_rbraced" value="1" /><span></span></div><div class="sheet-cell sheet-col8l0"><div class="sheet-popup">Braced</div><span class="sheet-tooltip">Braced: +1 if you are stationary and took a turn to Aim</span></div>
								<div class="sheet-cell sheet-col8l1"><input class="sheet-boolean" type="checkbox" name="attr_popupatk" value="-2" /><span></span></div><div class="sheet-cell sheet-col8l2"><div class="sheet-popup">Pop-up Attack</div><span class="sheet-tooltip">Pop-up attack: -2, and no Aim possible</span></div>
							</div>
							<div class="sheet-row sheet-inputs"> <!--begin .sheet-input row 900-->
								<div class="sheet-cell sheet-col28"><div class="sheet-popup">Rapid Fire</div><span class="sheet-tooltip">Rapid fire: 0 if 2-4 shots; +1 if 5-8 shots; +2 if 9-12 shots; +3 if 13-16<br />shots; +4 if 17-24 shots; +5 if 25-49 shots; +6 if 50-99 shots; +7 if 100-199 shots; etc</span></div><div class="sheet-cell sheet-col29"><select name="attr_rapidfire">
																	<option selected value="0">2-4 shots</option>
																	<option value="1">5-8 shots</option>
																	<option value="2">9-12 shots</option>
																	<option value="3">13-16 shots</option>
																	<option value="4">17-24 shots</option>
																	<option value="5">25-49 shots</option>
																	<option value="6">50-99 shots</option>
																	<option value="7">100-199 shots</option>
																</select></div>
																
								<div class="sheet-cell sheet-col30"><div class="sheet-popup">Dual Weapon Attack:</div><span class="sheet-tooltip">Dual-Weapon Attack: -4/-8 with primary/off hand (-4/-4 w. Ambidexterity)</span></div> <div class="sheet-cell sheet-col31"><div class="sheet-popup">Primary</div><span class="sheet-tooltip">Primary or Ambidextrous<br />check primary box.</span></div><div class="sheet-cell sheet-col3"><input class="sheet-boolean" type="checkbox" name="attr_rdualweaponprime" value='-4' /><span></span></div><div class="sheet-cell sheet-col3"><input class="sheet-boolean" type="checkbox" name="attr_rdualweaponoff" value='-4' /><span></span></div><div class="sheet-cell sheet-col32"><div class="sheet-popup">(Off-Hand)</div><span class="sheet-tooltip">Dual Weapon Attack Off-Hand check both boxes<br />Off-Hand only check only off-hand box</span></div>
								<div class="sheet-cell sheet-col33"><div class="sheet-popup">Opp Fire:</div><span class="sheet-tooltip">watch a specified area and attack as soon<br /> as a target presents itself. This is called<br />opportunity fire.</span></div><div class="sheet-cell sheet-col3"><input class="sheet-boolean" type="checkbox" name="attr_oppfire" value='-2' /><span></span></div>
								<div class="sheet-cell sheet-col34"><div class="sheet-popup">Hexes</div><span class="sheet-tooltip">Number of hexes being watched</span></div>
								<div class="sheet-cell sheet-col35"><select name="attr_opphexes">
																	<option value="0" selected>1 hex</option>
																	<option value="-1">2 hexes</option>
																	<option value="-2">3-4 hexes</option>
																	<option value="-3">5-6 hexes</option>
																	<option value="-4">7-10 hexes</option>
																	<option value="-5">11+ hexes</option>
																</select></div>
							</div>
						<div class="sheet-row sheet-inputs"> <!-- begin input row -->
							<div class="sheet-cell sheet-col3"><input class="sheet-boolean" type="checkbox" name="attr_rapidstrike" value='-6' /><span></span></div><div class="sheet-cell sheet-col4"><div class="sheet-popup">Rapid Strike</div><span class="sheet-tooltip">Rapid Strike: -6 on both attacks<br />
											(-3 w.Trained By A Master or Weapon<br />
											Master)</span></div>
							<div class="sheet-cell sheet-col3"><input class="sheet-boolean" type="checkbox" name="attr_rapidstriketrained" value='-3' /><span></span></div><div class="sheet-cell sheet-col4"><div class="sheet-popup">Trained Rapid Strke</div><span class="sheet-tooltip">Rapid Strike: -6 on both attacks<br />
											(-3 w.Trained By A Master or Weapon<br />
											Master)</span></div>
							<div class="sheet-cell sheet-col3"><input class="sheet-boolean" type="checkbox" name="attr_ccbtstrike" value='-2' /><span></span></div><div class="sheet-cell sheet-col4"><div class="sheet-popup">Strike into close cbt</div><span class="sheet-tooltip">Striking into close combat: -2</span></div>
							<div class="sheet-cell sheet-col3"><input class="sheet-boolean" type="checkbox" name="attr_wildswing" value='-5' /><span></span></div><div class="sheet-cell sheet-col4"><div class="sheet-popup">Wild Swing</div><span class="sheet-tooltip">Wild Swing: -5*</span></div>
						</div>							
							<div class="sheet-header"> <!--begin header row -->
								<div class="sheet-cell sheet-col9"><div class="sheet-popup">Targeting Systems</div>
								<span class="sheet-tooltip">Choose targeting system(s).
								</span></div>
							</div>
							<div class="sheet-row sheet-inputs"> <!--begin .sheet-input row 1000-->
								<div class="sheet-cell sheet-col1001"><input class="sheet-boolean" type="checkbox" name="attr_laser" value="1" /><span></span></div><div class="sheet-cell sheet-col1002"><div class="sheet-popup">laser sight</div><span class="sheet-tooltip">Laser sight: +1</span></div>
								
								<div class="sheet-cell sheet-col1003"><input class="sheet-boolean" type="checkbox" name="attr_scope" value="[[@{scopeacc}*1]]" /><span></span></div><div class="sheet-cell sheet-col1004"><div class="sheet-popup">Scope</div><span class="sheet-tooltip">Scope: +1 per second of Aim, up to<br /> a maximum of the scopes bonus<br />Check for using scope<br />enter number of seconds.</span></div><div class="sheet-cell sheet-col1005"><input type="number" name="attr_scopeacc" value="0" /></div>
								
								<div class="sheet-cell sheet-col1006"><input class="sheet-boolean" type="checkbox" name="attr_vtgt" value="[[@{vbonus}*1]]" /><span></span></div><div class="sheet-cell sheet-col1007"><div class="sheet-popup">Veh Sys.</div><span class="sheet-tooltip">Vehicular targeting system:<br />+1 to +3 if shooter took a turn to Aim<br />Check for using targeting system<br />Enter number for bonus</span></div><div class="sheet-cell sheet-col1008"><input type="number" name="attr_vbonus" value="0" /></div>
								
								<div class="sheet-cell sheet-col1009"><input class="sheet-boolean" type="checkbox" name="attr_unfamiliar" value="-2" /><span></span></div><div class="sheet-cell sheet-col1010"><div class="sheet-popup">Unfamiliar weapon/system</div><span class="sheet-tooltip">Unfamiliar weapon or targeting system: -2</span></div>
							</div>
						</div> <!-- End .sheet-hold -->
					</div> <!-- .sheet-table -->	
				
						
					
			
			</div> <!-- end sheet-box combat modifiers -->
			
			
		

			
	</div> <!-- .sheet-tab4 -->    


	<!-- ===== ===== ===== ===== ITEMS TAB ===== ===== ===== ===== -->
	<div class="sheet-tab5">

		<!-- _____ _____ QUICK INVENTORY BOX _____ _____ -->

		<div class="sheet-box sheet-quick-inventory sheet-textarea">
			<div class="sheet-label">Quick Inventory</div>
			<textarea name="attr_quick_inventory"></textarea>
		</div>

		<!-- _____ _____ WEALTH BOX _____ _____ -->
	
		<div class="sheet-box sheet-items">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0"></div>
					<div class="sheet-cell sheet-col101">
						<div class="sheet-popup">Loadout</div>
						<span class="sheet-tooltip">
							Select loadout.
							<br />
							Items can be in more than one loadout.
						</span>
					</div>
					<div class="sheet-cell sheet-col2"></div>
					<div class="sheet-cell sheet-col3"></div>
					<div class="sheet-cell sheet-col4"></div>
					<div class="sheet-cell sheet-col5"></div>
					<div class="sheet-cell sheet-col6"></div>
				</div>
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Possessions</div>
					<div class="sheet-cell sheet-col7">Type:</div>
					<div class="sheet-cell sheet-col1">
						<div class="sheet-popup">A</div>
						<span class="sheet-tooltip">
							Loadout A
						</span>
					</div>
						<div class="sheet-cell sheet-col1">
						<div class="sheet-popup">B</div>
						<span class="sheet-tooltip">
							Loadout B
						</span>
					</div>
						<div class="sheet-cell sheet-col1">
						<div class="sheet-popup">C</div>
						<span class="sheet-tooltip">
							Loadout C
						</span>
					</div>
					<div class="sheet-cell sheet-col2">#</div>
					<div class="sheet-cell sheet-col3">$</div>
					<div class="sheet-cell sheet-col4">W</div>
				</div>
				<fieldset class="repeating_item">
					<input class="sheet-toggle" type="checkbox" />
					<span class="sheet-checkbox"></span>
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col0">
							<input title="@{repeating_item_$X_name}" type="text" name="attr_name" value="" accept="Name" placeholder="Item Name">
						</div>
						<div class="sheet-cell sheet-col7"><select name="attr_eqip_type">
							<option value="0">Defense</option>
							<option value="1">General</option>
							<option value="2">Offense</option>
							</select>
						</div>
						<div class="sheet-cell sheet-col1">
							<input class="sheet-boolean" type="checkbox" name="attr_loadoutacarried" value="1" />
						</div>
						<div class="sheet-cell sheet-col1">
							<input class="sheet-boolean" type="checkbox" name="attr_loadoutbcarried" value="1" />
						</div>
						<div class="sheet-cell sheet-col1">
							<input class="sheet-boolean" type="checkbox" name="attr_loadoutccarried" value="1" />
						</div>
						<div class="sheet-cell sheet-col2">
							<input type="number" name="attr_count" value="1" />
						</div>
						<div class="sheet-cell sheet-col3">
							<input type="number" name="attr_cost" value="0" />
						</div>
						<div class="sheet-cell sheet-col4">
							<input type="number" name="attr_weight" value="0" step="any" />
						</div>
						<div class="sheet-cell sheet-col6">
							<div class="sheet-hidden"><span name="attr_loadoutaweighttotal" value="0" /></div>
							<div class="sheet-hidden"><span name="attr_loadoutbweighttotal" value="0" /></div>
							<div class="sheet-hidden"><span name="attr_loadoutcweighttotal" value="0" /></div>
						</div>
					</div> <!-- .sheet-row -->
					<div class="sheet-row sheet-row-details">
						<div class="sheet-cell sheet-col0">
						Test row <input class="sheet-toggle" type="checkbox" value="1" name="attr_testcheckbox"/>
						</div>
					</div>
					<div class="sheet-row sheet-row-details">
						<div class="sheet-cell sheet-col0 sheet-label">
							Notes
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="text" name="attr_notes" />
						</div>
					</div> <!-- .sheet-row -->
				</fieldset> <!-- .repeating_item -->
				<div class="sheet-hidden"><span name="attr_total_weight" value="0" /></div>
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-skills -->
		<div class="sheet-box sheet-loadouts">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0"><input type="radio" value="1" name="attr_loadoutchoice" checked="checked" class="sheet-loadoutchoice"/></div>
					<div class="sheet-cell sheet-col1">Loadout A</div>
				</div>
				<div class="sheet-row sheet-loadout-row">
					<div class="sheet-cell sheet-col0 sheet-label">
						Descr:
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_loadouta_descr" title="@{loadouta_descr}" placeholder="Loadout Description"/>
					</div>
					<div class="sheet-cell sheet-col0 sheet-label">
						Value:
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_loadouta_total_cost" value="0" readonly="readonly" />
					</div>
					<div class="sheet-cell sheet-col0 sheet-label">
						Weight:
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_loadouta_total_weight" value="0" readonly="readonly" />
					</div>
				</div>
			</div>
		</div>
		<div class="sheet-box sheet-loadouts">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0"><input type="radio" value="2" name="attr_loadoutchoice" class="sheet-loadoutchoice"/></div>
					<div class="sheet-cell sheet-col1">Loadout B</div>
				</div>
				<div class="sheet-row sheet-loadout-row">
					<div class="sheet-cell sheet-col0 sheet-label">
						Descr:
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_loadoutb_descr" title="@{loadoutb_descr}" placeholder="Loadout Description"/>
					</div>
					<div class="sheet-cell sheet-col0 sheet-label">
						Value:
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_loadoutb_total_cost" value="0" readonly="readonly" />
					</div>
					<div class="sheet-cell sheet-col0 sheet-label">
						Weight:
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_loadoutb_total_weight" value="0" readonly="readonly" />
					</div>
				</div>
			</div>
		</div>
		<div class="sheet-box sheet-loadouts">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0"><input type="radio" value="3" name="attr_loadoutchoice" class="sheet-loadoutchoice"></div>
					<div class="sheet-cell sheet-col1">Loadout C</div>
				</div>
				<div class="sheet-row sheet-loadout-row">
					<div class="sheet-cell sheet-col0 sheet-label">
						Descr:
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="text" name="attr_loadoutc_descr" title="@{loadoutc_descr}" placeholder="Loadout Description"/>
					</div>
					<div class="sheet-cell sheet-col0 sheet-label">
						Value:
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_loadoutc_total_cost" value="0" readonly="readonly" />
					</div>
					<div class="sheet-cell sheet-col0 sheet-label">
						Weight:
					</div>
					<div class="sheet-cell sheet-col1">
						<input type="number" name="attr_loadoutc_total_weight" value="0" readonly="readonly" />
					</div>
				</div>
			</div>
		</div>
	
	</div> <!-- .sheet-tab5 -->       


	<!-- ===== ===== ===== ===== GRIMOIRE TAB ===== ===== ===== ===== -->
	<div class="sheet-tab6">
		Standard Magic:
		<input type="radio" name="attr_magictab" class="sheet-magictab sheet-magictab1" value="1" checked="checked"><span title="Spells"></span>
		
		Ritual Magic:
		<input type="radio" name="attr_magictab" class="sheet-magictab sheet-magictab2" value="2"><span title="Rituals"></span>
		
			
	<div class="sheet-magictab-br"></div>
	
		<div class="sheet-magictab-content sheet-magictab1">

		<!-- _____ _____ SPELLS SETUP _____ _____ -->
		<div class="sheet-box sheet-spells">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell"> Spells Based on: </div>
					<div class="sheet-cell sheet-col3">
						<select name="attr_spell_base">
							<option value="@{strength}">ST</option>
							<option value="@{dexterity}">DX</option>
							<option value="@{intelligence}" selected>IQ</option>
							<option value="@{health}">HT</option>
							<option value="@{willpower}">Will</option>
							<option value="@{perception}">Per</option>
							<option value="10">10</option>
						</select>
					</div>
					<div class="sheet-cell"> Magery/PI/Bonus Level: </div>
					<div class="sheet-cell sheet-col4">
						<input type="number" name="attr_spell_bonus" value="0" />
					</div>
				</div>
			</div>
		</div>


		<!-- _____ _____ SPELLS BOX _____ _____ -->
	
		<div class="sheet-box sheet-spells">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">Spell</div>
					<div class="sheet-cell sheet-col1"></div>
					<div class="sheet-cell sheet-col2">Level</div>
					<div class="sheet-cell sheet-col3">Diff</div>
					<div class="sheet-cell sheet-col4">Pts</div>
					<div class="sheet-cell sheet-col5">Time</div>
					<div class="sheet-cell sheet-col6">Duration</div>
					<div class="sheet-cell sheet-col7">Cost</div>
					<div class="sheet-cell sheet-col8">Maintain</div>
					<div class="sheet-cell sheet-col9">Ref</div>
				</div> <!-- .sheet-header -->
				<fieldset class="repeating_spells">
					<input class="sheet-toggle" type="checkbox" />
					<span class="sheet-checkbox"></span>
					<div class="sheet-row sheet-row-stats">
						<div class="sheet-cell sheet-col0">
							<input type="text" name="attr_name" title="@{repeating_spells_$X_name}" placeholder="Spell Name"/>
						</div>
						<div class="sheet-cell sheet-col1">
							<button type="roll" value="@{roll} [[3d6]] @{VS} @{name} [[@{level} + @{modifier}]]" name="roll_vsSL" />
						</div>
						<div class="sheet-cell sheet-col2">
							<input type="text" name="attr_level" disabled="disabled" 
								value="@{spell_base} + @{difficulty} + @{spell_bonus} + (floor((@{points} * 0.25) + 2) * ceil( ( ( @{points} - 2 ) + abs( @{points} - 2) ) / 256 ) + @{points} * abs( ceil( ( ( @{points} - 2 ) + abs( @{points} - 2) ) / 256 ) - 1 ))"/>
						</div>
						<div class="sheet-cell sheet-col3">
							<select name="attr_difficulty">
								<option value="-3">H</option>
								<option value="-4">VH</option>
							</select>
						</div>
						<div class="sheet-cell sheet-col4">
							<input type="number" name="attr_points" />
						</div>
						<div class="sheet-cell sheet-col5">
							<input type="text" name="attr_casttime" />
						</div>
						<div class="sheet-cell sheet-col6">
							<input type="text" name="attr_duration" />
						</div>
						<div class="sheet-cell sheet-col7">
							<input type="text" name="attr_cost" />
						</div>
						<div class="sheet-cell sheet-col8">
							<input type="text" name="attr_maintain" />
						</div>
						<div class="sheet-cell sheet-col9">
							<input type="text" name="attr_ref" />
						</div>
					</div> <!-- .sheet-row -->
					<div class="sheet-row sheet-row-details">
						<div class="sheet-cell sheet-col0 sheet-label">
							Notes
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="text" name="attr_notes" />
						</div>
					</div> <!-- .sheet-row -->
				</fieldset> <!-- .repeating_spells -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-spells -->
		</div>
		
		
		<div class="sheet-magictab-content sheet-magictab2">
		<!-- _____ _____ RITUALS BOX _____ _____ -->
		
		<div class="sheet-box sheet-rituals">
			<div class="sheet-table">
				<div class="sheet-header">
					<div class="sheet-cell sheet-col0">
					Ritual Name
					</div>
					<div class="sheet-cell sheet-col8">Damage</div>
					<div class="sheet-cell sheet-col9">
						<div class="sheet-popup">Type</div>
						<span class="sheet-tooltip">
							<table>
								<thead>
									<tr>
										<th>Abbr</th>
										<th>Multiplier</th>
										<th>Name</th>
									</tr>
								</thead>
								<tbody>
									<tr><td>cut</td> <td>x1.5</td><td>Cutting</td></tr>
									<tr><td>imp</td> <td>x2.0</td><td>Impaling</td></tr>
									<tr><td>cr</td>  <td>x1.0</td><td>Crushing</td></tr>
									<tr><td>pi-</td> <td>x0.5</td><td>Small Piercing</td></tr>
									<tr><td>pi</td>  <td>x1.0</td><td>Piercing</td></tr>
									<tr><td>pi+</td> <td>x1.5</td><td>Large Piercing</td></tr>
									<tr><td>pi++</td><td>x2.0</td><td>Huge Piercing</td></tr>
									<tr><td>aff</td> <td>-</td><td>Affliction</td></tr>
									<tr><td>burn</td><td>x1.0</td><td>Burning</td></tr>
									<tr><td>cor</td> <td>x1.0</td><td>Corrosion</td></tr>
									<tr><td>fat</td> <td>x1.0</td><td>Fatigue</td></tr>
									<tr><td>tox</td> <td>x1.0</td><td>Toxic</td></tr>
									<tr><td>spec</td><td>-</td><td>Special</td></tr>
								</tbody>
							</table>
						</span>
					</div>
					<div class="sheet-cell sheet-col1"></div>
					<div class="sheet-cell sheet-col2">
					Energy
					</div>
					<div class="sheet-cell sheet-col3">
					Skill
					</div>
				</div>
				<fieldset class="repeating_rituals">
					<input class="sheet-toggle" type="checkbox" />
					<span class="sheet-checkbox"></span>
						<div class="sheet-row sheet-row-stats">
							<div class="sheet-cell sheet-col0">
								<input type="text" name="attr_ritualname" title="@{repeating_rituals_$X_name}" placeholder="Ritual Name"/>
							</div>
						<div class="sheet-cell sheet-col8">
							<input type="text" name="attr_damage"placeholder="0"/>
						</div>
						<div class="sheet-cell sheet-col9">
							<select name="attr_type">
								<option value="Cutting (cut)">cut</option>
								<option value="Impaling (imp)">imp</option>
								<option value="Crushing (cr)">cr</option>
								<option value="Small Piercing (pi-)">pi-</option>
								<option value="Piercing (pi)">pi</option>
								<option value="Large Piercing (pi+)">pi+</option>
								<option value="Huge Piercing (pi++)">pi++</option>
								<option value="Burning (burn)">burn</option>
								<option value="Corrosion (cor)">cor</option>
								<option value="Fatigue (fat)">fat</option>
								<option value="Toxic (tox)">tox</option>
								<option value="Special (spc)">spc</option>
							</select>
						</div>
						<div class="sheet-hidden"><input type="number" name="attr_wound_modifier" value="0" readonly="readonly"/></div>
							<div class="sheet-cell sheet-col11">
							<button type="roll" name="attr_weaponroll" value="&{template:GURPS} {{roll= [[3d6]] }} @{vs} {{target= [[@{ritualskill} + @{modifier}]] }} {{charactername=@{character_name} }} {{rolltype=MAGIC}} {{rollname=@{ritualname}}} {{damagetype=@{type} }} {{woundmod=@{wound_modifier} }} {{notes=@{ritualnotes} }} {{damageroll=[[@{damage}]]}} {{hit-loc=[[ @{hitlocationroll} ]] }} {{critbody=[[ @{critbodytable} ]] }} {{crithead=[[ @{critheadtable} ]] }} {{success=([[@{ritualskill} + (@{modifier} +1))]]}}" />
							</div>
							<div class="sheet-cell sheet-col2">
								<input type="number" name="attr_ritualenergy" value="0" placeholder="0"/>
							</div>
							<div class="sheet-cell sheet-col3">
								<input type="number" name="attr_ritualskill" value="10" placeholder="0"/>
							</div>
						</div>
						<div class="sheet-row sheet-row-details">
						<div class="sheet-cell sheet-col0 sheet-label">
							Notes
						</div>
						<div class="sheet-cell sheet-col1">
							<input type="text" name="attr_ritualnotes" title="@{repeating_rituals_$X_notes}" placeholder="notes"/>
						</div>
						</div>
				</fieldset> <!-- .repeating_rituals -->
			</div> <!-- .sheet-table -->
		</div> <!-- .sheet-box .sheet-spells -->
		</div>
		
	</div> <!-- .sheet-tab6 -->

	<!-- ===== ===== ===== ===== OPTIONS TAB ===== ===== ===== ===== -->
	<div class="sheet-tab0">
		<div class="sheet-options">
			<div class="sheet-box">
				<input type="radio" name="attr_modifier" value="0" checked="true" />
				<span class="sheet-popup">No Modifier Prompt</span>
				<span class="sheet-tooltip">
					Rolls will be made immediately with no prompt.
				</span>
				<br /><input type="radio" name="attr_modifier" value="?{Modifier|0}" />
				<span class="sheet-popup">Single Modifier Prompt</span>
				<span class="sheet-tooltip">
					Ask for a bonus or penalty to be added to dice rolls.
					<br />
					This will not affect damage rolls.
				</span>
				<br />
				<input type="radio" name="attr_modifier" value="?{Modifier|0} + ?{Shock|0} + ?{Reeling or Staggered|0} + ?{Off-Hand|0} + ?{Familiarity|0}" />
				<span class="sheet-popup">Extended Modifier Prompts</span>
				<span class="sheet-tooltip">
					Instead of a single modifier, rolls will ask for a series of modifiers,<br />
					to remind you about potential bonuses/penalties.
					<br />
					This will not affect damage rolls.
				</span>
			</div>
			<div class="sheet-box">
				<input type="radio" name="attr_roll" value="@{character_name} rolls" checked="true" />
				<span class="sheet-popup">Public Rolls</span>
				<span class="sheet-tooltip">
					All players will be able to see<br />
					your skill level, roll and results.
				</span>
				<br />
				<input type="radio" name="attr_roll" value="/w gm --l @{character_name} rolls" />
				<span class="sheet-popup">Private Skill Levels</span>
				<span class="sheet-tooltip">
					Only the GM will be able to see<br />
					your skill level, but all players<br />
					will see the result.
					<br />
					This will not affect damage rolls.
				</span>
				<br />
				<input type="radio" name="attr_roll" value="/w gm @{character_name} rolls" />
				<span class="sheet-popup">Private Rolls</span>
				<span class="sheet-tooltip">
					Only the GM will see your skill<br />
					level and the result.
					<br />
					This will not affect damage rolls.
				</span>
			</div>
			<hr />
			<div class="sheet-box">
				<input type="radio" name="attr_mod_cascade" value="all" checked="true" />
				<span class="sheet-popup">Mods to attributes increase all derived stats (including HP, FP)</span>
				<br />
				<input type="radio" name="attr_mod_cascade" value="some" />
				<span class="sheet-popup">Mods to attributes increase most derived stats (not HP, FP)</span>
				<br />
				<input type="radio" name="attr_mod_cascade" value="none" />
				<span class="sheet-popup">Mods to attributes do not increase derived stats</span>
			</div>
			<hr />
			<div class="sheet-box">
				<input type="radio" name="attr_wtype" value="/w gm " checked="true" />
				<span class="sheet-popup">NPC</span>
				<span class="sheet-tooltip">
					Non-Player Character
				</span>
				<br />
				<input type="radio" name="attr_wtype" value="" />
				<span class="sheet-popup">PC</span>
				<span class="sheet-tooltip">
					Player Character
				</span>			    	
			</div>
			
			<br />
		</div>
	</div>
	<!-- ==========HIDDEN TABLE ROLLS==========-->
	<div class="hidden">
	<input type="hidden" name="attr_hitlocationroll" value="[[3d6]]" disabled="disabled"/>
	<input type="text" name="attr_hitlocation" value="0" readonly="readonly"/>
	<input type="text" name="attr_critbodytable" value="1t[Critical-Hit-table]" disabled="disabled"/>
	<input type="text" name="attr_critheadtable" value="1t[Critical-Head-Table]" disabled="disabled"/>
	</div>
	<!-------------------Tables---------------------->
    <div class="sheet-hidden">
    	<div class="sheet-hold">
    		<table>
    			<tr>
                    <th>Combat Critical Miss<br><div style="font-size:0.7em">(Combat)</div></th>
                    <th><input type="text" name="attr_CCMt" value="1t[Combat-Critical-Miss-table]" /></th>
                </tr>
    			<tr>
                    <th>Combat Critical Hit<br><div style="font-size:0.7em">(Combat)</div></th>
                    <th><input type="text" name="attr_CCHt" value="1t[Combat-Critical-Hit-table]" /></th>
                </tr>			
    			<tr>
                    <th>Skill Critical Fail<br><div style="font-size:0.7em">(Skill)</div></th>
                    <th><input type="text" style="width: 100px;" name="attr_SCMt" value="1t[Skill-Critical-Fail-table]" /></th>
                </tr>
    			<tr>
                    <th>Skill Critical Success<br><div style="font-size:0.7em">(Skill)</div></th>
                    <th><input type="text" name="attr_SCMt" value="1t[Skill-Critical-Success-table]" /></th>
                </tr>
    			<tr>
                    <th>Hit Location<br><div style="font-size:0.7em">(Combat)</div></th>
                    <th><input type="text" name="attr_HitLocate" value="1t[Hit-Location-Table]" /></th>
                </tr>			
    		</table>
    
    				
    	</div>
    </div>



<div class="sheet-hidden">

</div>


<script type="text/worker">

	/* ---- BEGIN: TheAaronSheet.js ---- */
// Github:   https://github.com/shdwjk/TheAaronSheet/blob/master/TheAaronSheet.js
// By:       The Aaron, Arcane Scriptomancer
// Contact:  https://app.roll20.net/users/104025/the-aaron

var TAS = TAS || (function(){
    'use strict';

    var version = '0.2.4',
        lastUpdate = 1457098091,

        loggingSettings = {
            debug: {
                key:     'debug',
                title:   'DEBUG',
                color: {
                    bgLabel: '#7732A2',
                    label:   '#F2EF40',
                    bgText:  '#FFFEB7',
                    text:    '#7732A2'
                }
            },
            error: {
                key:     'error',
                title:   'Error',
                color: {
                    bgLabel: '#C11713',
                    label:   'white',
                    bgText:  '#C11713',
                    text:    'white'
                }
            },
            warn: {
                key:     'warn',
                title:   'Warning',
                color: {
                    bgLabel: '#F29140',
                    label:   'white',
                    bgText:  '#FFD8B7',
                    text:    'black'
                }
            },
            info: {
                key:     'info',
                title:   'Info',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#B3B2EB',
                    text:    'black'
                }
            },
            notice: {
                key:     'notice',
                title:   'Notice',
                color: {
                    bgLabel: '#33C133',
                    label:   'white',
                    bgText:  '#ADF1AD',
                    text:    'black'
                }
            },
            log: {
                key:     'log',
                title:   'Log',
                color: {
                    bgLabel: '#f2f240',
                    label:   'black',
                    bgText:  '#ffff90',
                    text:    'black'
                }
            },
            callstack: {
                key:     'TAS',
                title:   'function',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#B3B2EB',
                    text:    'black'
                }
            },
            callstack_async: {
                key:     'TAS',
                title:   'ASYNC CALL',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#413FA9',
                    text:    'white'
                }
            },
            TAS: {
                key:     'TAS',
                title:   'TAS',
                color: {
                    bgLabel: 'grey',
                    label:   'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)',
                    bgText:  'grey',
                    text:    'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)'
                }
            }
        },


        config = {
            debugMode: false,
            logging: {
                log: true,
                notice: true,
                info: true,
                warn: true,
                error: true,
                debug: false
            }
        },

        callstackRegistry = [],
		queuedUpdates = {}, //< Used for delaying saves till the last momment.

    complexType = function(o){
        switch(typeof o){
            case 'string':
                return 'string';
            case 'boolean':
                return 'boolean';
            case 'number':
                return (_.isNaN(o) ? 'NaN' : (o.toString().match(/\./) ? 'decimal' : 'integer'));
            case 'function':
                return 'function: '+(o.name ? o.name+'()' : '(anonymous)');
            case 'object':
                return (_.isArray(o) ? 'array' : (_.isArguments(o) ? 'arguments' : ( _.isNull(o) ? 'null' : 'object')));
            default:
                return typeof o;
        }
    },

	dataLogger = function(primaryLogger,secondaryLogger,data){
        _.each(data,function(m){
            var type = complexType(m);
            switch(type){
                case 'string':
                    primaryLogger(m);
                    break;
                case 'undefined':
                case 'null':
                case 'NaN':
                    primaryLogger('['+type+']');
                    break;
                case 'number':
                case 'not a number':
                case 'integer':
                case 'decimal':
                case 'boolean':
                    primaryLogger('['+type+']: '+m);
                    break;
                default:
                    primaryLogger('['+type+']:=========================================');
                    secondaryLogger(m);
                    primaryLogger('=========================================================');
                    break;
            }
        });
	},


    colorLog = function(options){
        var coloredLoggerFunction,
            key = options.key,
            label = options.title || 'TAS',
            lBGColor = (options.color && options.color.bgLabel) || 'blue',
            lTxtColor = (options.color && options.color.label) || 'white',
            mBGColor = (options.color && options.color.bgText) || 'blue',
            mTxtColor = (options.color && options.color.text) || 'white';

        coloredLoggerFunction = function(message){
            console.log(
                '%c '+label+': %c '+message + ' ',
                'background-color: '+lBGColor+';color: '+lTxtColor+'; font-weight:bold;',
                'background-color: '+mBGColor+';color: '+mTxtColor+';'
            ); 
        };
        return function(){
            if('TAS'===key || config.logging[key]){
               dataLogger(coloredLoggerFunction,function(m){console.log(m);},_.toArray(arguments)); 
            }
        };
    },

    logDebug  = colorLog(loggingSettings.debug),
    logError  = colorLog(loggingSettings.error),
    logWarn   = colorLog(loggingSettings.warn),
    logInfo   = colorLog(loggingSettings.info),
    logNotice = colorLog(loggingSettings.notice),
    logLog    = colorLog(loggingSettings.log),
    log       = colorLog(loggingSettings.TAS),
    logCS     = colorLog(loggingSettings.callstack),
    logCSA    = colorLog(loggingSettings.callstack_async),

    registerCallstack = function(callstack,label){
        var idx=_.findIndex(callstackRegistry,function(o){
            return (_.difference(o.stack,callstack).length === _.difference(callstack,o.stack).length) &&
                _.difference(o.stack,callstack).length === 0 &&
                o.label === label;
        });
        if(-1 === idx){
            idx=callstackRegistry.length;
            callstackRegistry.push({
                stack: callstack,
                label: label
            });
        }
        return idx;
    },

    setConfigOption = function(options){
        var newconf =_.defaults(options,config);
        newconf.logging=_.defaults(
            (options && options.logging)||{},
            config.logging
        );
        config=newconf;
    },
    
    debugMode = function(){
        config.logging.debug=true;
        config.debugMode = true;
    },

    getCallstack = function(){
        var e = new Error('dummy'),
            stack = _.map(_.rest(e.stack.replace(/^[^\(]+?[\n$]/gm, '')
            .replace(/^\s+at\s+/gm, '')
            .replace(/^Object.<anonymous>\s*\(/gm, '{anonymous}()@')
            .split('\n')),function(l){
                return l.replace(/\s+.*$/,'');
            });
        return stack;
    },
    logCallstackSub = function(cs){
        var matches, csa;
        _.find(cs,function(line){
            matches = line.match(/TAS_CALLSTACK_(\d+)/);
            if(matches){
               csa=callstackRegistry[matches[1]];
               logCSA( '===================='+(csa.label ? '> '+csa.label+' <' : '')+'====================');
               logCallstackSub(csa.stack);
               return true;
            } 
            logCS(line);
            return false;
        });
    },
    logCallstack = function(){
        var cs;
        if(config.debugMode){
            cs = getCallstack();
            cs.shift();
            log('==============================> CALLSTACK <==============================');
            logCallstackSub(cs);
            log('=========================================================================');
        }
    },


    wrapCallback = function (label, callback, context){
        var callstack;
        if('function' === typeof label){
            context=callback;
            callback=label;
            label=undefined;
        }
        if(!config.debugMode){
            return (function(cb,ctx){
                return function(){
                    cb.apply(ctx||{},arguments);
                };
            }(callback,context));
        }
        
        callstack = getCallstack();
        callstack.shift();
        
        return (function(cb,ctx,cs,lbl){
            var ctxref=registerCallstack(cs,lbl);

            /*jshint -W054 */
            return new Function('cb','ctx','TASlog',
                "return function TAS_CALLSTACK_"+ctxref+"(){"+
                    "TASlog('Entering: '+(cb.name||'(anonymous function)'));"+
                    "cb.apply(ctx||{},arguments);"+
                    "TASlog('Exiting: '+(cb.name||'(anonymous function)'));"+
                "};")(cb,ctx,log);
            /*jshint +W054 */
        }(callback,context,callstack,label));
    },


    prepareUpdate = function( attribute, value ){
        queuedUpdates[attribute]=value;
    },

    applyQueuedUpdates = function() {
      setAttrs(queuedUpdates);
      queuedUpdates = {};
    },

	namesFromArgs = function(args,base){
        return _.chain(args)
            .reduce(function(memo,attr){
                if('string' === typeof attr) {
                    memo.push(attr);
                } else if(_.isArray(args) || _.isArguments(args)){
                    memo = namesFromArgs(attr,memo);
                }
                return memo;
            },(_.isArray(base) && base) || [])
            .uniq()
            .value();
	},

	addId = function(obj,value){
		Object.defineProperty(obj,'id',{
			value: value,
			writeable: false,
			enumerable: false
		});
	},

	addProp = function(obj,prop,value,fullname){
		(function(){
            var pname=(_.contains(['S','F','I','D'],prop) ? '_'+prop : prop),
			    full_pname = fullname || prop,
                pvalue=value;

            _.each(['S','I','F'],function(p){
                if( !_.has(obj,p)){
                    Object.defineProperty(obj, p, {
                        value: {},
                        enumerable: false,
                        readonly: true
                    });
                }
            });
            if( !_.has(obj,'D')){
                Object.defineProperty(obj, 'D', {
                    value: _.reduce(_.range(10),function(m,d){
                            Object.defineProperty(m, d, {
                                value: {},
                                enumerable: true,
                                readonly: true
                            });
                            return m;
                        },{}),
                    enumerable: false,
                    readonly: true
                });
            }


            // Raw value
			Object.defineProperty(obj, pname, {
                enumerable: true,
				set: function(v){
                    if(v!==pvalue) {
                        pvalue=v;
                        prepareUpdate(full_pname,v);
                    }
				},
				get: function(){
					return pvalue;
				}
			});
            
            // string value
			Object.defineProperty(obj.S, pname, {
                enumerable: true,
				set: function(v){
                    var val=v.toString();
                    if(val !== pvalue) {
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
				},
				get: function(){
					return pvalue.toString();
				}
			});

            // int value
			Object.defineProperty(obj.I, pname, {
                enumerable: true,
				set: function(v){
                    var val=parseInt(v,10) || 0;
                    if(val !== pvalue){
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
				},
				get: function(){
					return parseInt(pvalue,10) || 0;
				}
			});

            // float value
			Object.defineProperty(obj.F, pname, {
                enumerable: true,
				set: function(v){
                    var val=parseFloat(v) || 0;
                    if(val !== pvalue) {
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
				},
				get: function(){
					return parseFloat(pvalue) || 0;
				}
			});
            _.each(_.range(10),function(d){
                Object.defineProperty(obj.D[d], pname, {
                    enumerable: true,
                    set: function(v){
                        var val=(parseFloat(v) || 0).toFixed(d);
                        if(val !== pvalue){
                            pvalue=val;
                            prepareUpdate(full_pname,val);
                        }
                    },
                    get: function(){
                        return (parseFloat(pvalue) || 0).toFixed(d);
                    }
                });
            });

		}());
	},
	
	repeating = function( section ) {
		return (function(s){
			var sectionName = s,
				attrNames = [],
				fieldNames = [],
				operations = [],
                after = [],
			
			repAttrs = function TAS_Repeating_Attrs(){
				attrNames = namesFromArgs(arguments,attrNames);
				return this;
			},
			repFields = function TAS_Repeating_Fields(){
				fieldNames = namesFromArgs(arguments,fieldNames);
				return this;
			},
			repReduce = function TAS_Repeating_Reduce(func, initial, final, context) { 
				operations.push({
                    type: 'reduce',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    memo: (_.isUndefined(initial) && 0) || initial,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
			},
			repMap = function TAS_Repeating_Map(func, final, context) {
				operations.push({
                    type: 'map',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
			},
            repEach = function TAS_Repeating_Each(func, final, context) {
				operations.push({
                    type: 'each',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
            },
            repTap = function TAS_Repeating_Tap(final, context) {
				operations.push({
                    type: 'tap',
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
            },
            repAfter = function TAS_Repeating_After(callback,context) {
				after.push({
                    callback: (callback && _.isFunction(callback) && callback) || _.noop,
                    context: context || {}
                });
				return this;
            },
			repExecute = function TAS_Repeating_Execute(callback,context){
				var rowSet = {},
					attrSet = {},
					fieldIds = [],
					fullFieldNames = [];

                repAfter(callback,context);

				// call each operation per row.
				// call each operation's final
				getSectionIDs("repeating_"+sectionName,function(ids){
					fieldIds = ids;
					fullFieldNames = _.reduce(fieldIds,function(memo,id){
						return memo.concat(_.map(fieldNames,function(name){
							return 'repeating_'+sectionName+'_'+id+'_'+name;  
						}));
					},[]);
					getAttrs( _.uniq(attrNames.concat(fullFieldNames)), function(values){
						_.each(attrNames,function(aname){
							if(values.hasOwnProperty(aname)){
								addProp(attrSet,aname,values[aname]);
							}
						});

						rowSet = _.reduce(fieldIds,function(memo,id){
							var r={};
							addId(r,id);
							_.each(fieldNames,function(name){
								var fn = 'repeating_'+sectionName+'_'+id+'_'+name;  
								addProp(r,name,values[fn],fn);
							});

							memo[id]=r;

							return memo;
						},{});

                        _.each(operations,function(op){
                            var res;
                            switch(op.type){
                                case 'tap':
                                    _.bind(op.final,op.context,rowSet,attrSet)();
                                    break;

                                case 'each':
                                    _.each(rowSet,function(r){
                                        _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,rowSet,attrSet)();
                                    break;

                                case 'map':
                                    res = _.map(rowSet,function(r){
                                        return _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,res,rowSet,attrSet)();
                                    break;

                                case 'reduce':
                                    res = op.memo;
                                    _.each(rowSet,function(r){
                                        res = _.bind(op.func,op.context,res,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,res,rowSet,attrSet)();
                                    break;
                            }
                        });

                        // finalize attrs
                        applyQueuedUpdates();
                        _.each(after,function(op){
                            _.bind(op.callback,op.context)();
                        });
					});
				});
			};
				
			return {
				attrs: repAttrs,
				attr: repAttrs,

				column: repFields,
				columns: repFields,
				field: repFields,
				fields: repFields,

				reduce: repReduce,
				inject: repReduce,
				foldl: repReduce,

				map: repMap,
				collect: repMap,

				each: repEach,
                forEach: repEach,

                tap: repTap,
                'do': repTap,

				after: repAfter,
				last: repAfter,
				done: repAfter,

				execute: repExecute,
				go: repExecute,
				run: repExecute
			};
		}(section));
	},


    repeatingSimpleSum = function(section, field, destination){
        repeating(section)
            .attr(destination)
            .field(field)
            .reduce(function(m,r){
                return m + (r.F[field]);
            },0,function(t,r,a){
                a.S[destination]=t;
            })
            .execute();
    };

	console.log('%c..*`*..*`*.  The Aaron Sheet  v'+version+'  .*`*..*`*..','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
	console.log('%c..*`*..*`*.  Last update: '+(new Date(lastUpdate*1000))+'  .*`*..*`*..','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');


    return {
        /* Repeating Sections */
        repeatingSimpleSum: repeatingSimpleSum,
		repeating: repeating,

        /* Configuration */
        config: setConfigOption,

        /* Debugging */
        callback: wrapCallback,
        callstack: logCallstack,
        debugMode: debugMode,
        _fn: wrapCallback,

        /* Logging */
        debug: logDebug,
        error: logError,
        warn: logWarn,
        info: logInfo,
        notice: logNotice,
        log: logLog
    };
}());

/* ---- END: TheAaronSheet.js ---- */

	
	var noop = function () {}; // do nothing.

	var version = '1.3.2';

	var modCascade = true;
	var modCascadeAll = true;

	/* Due to the change from auto-calc fields to helper scrips,
	 * I'm running a "on open" to set various fields. At some point
	 * in the future this might no longer be needed.
	 */
	on('sheet:opened', function() {
		console.log('********* Sheet Opened *********');
		getAttrs(['sheet_version', 'mod_cascade', 'modCascade', 'modCascadeAll'], function(v) {
			if (v.modCascade && v.modCascadeAll) {
				modCascade = v.modCascade;
				modCascadeAll = v.modCascadeAll;
			}
			if (!v.sheet_version || v.sheet_version != version) {
				// Set sheet version:
				setAttrs({ sheet_version: version });

				// initalize any empty fields in repeating sections since the default values were removed.
				loadRepeating('repeating_languages', 'spoken', 0);
				loadRepeating('repeating_languages', 'written', 0);
				loadRepeating('repeating_skills', 'points', 1);
				loadRepeating('repeating_cultures', 'points', 1);
				loadRepeating('repeating_techniques', 'points', 1);
				loadRepeating('repeating_spells', 'points', 1);

				// initalize all calculated stats
				resetAll(v.mod_cascade);
			}
		});
	});

	on('change:mod_cascade', function (e) {
		getAttrs(['mod_cascade'], function (v) {
			resetAll(v.mod_cascade);
		})
	});

	function resetAll(mod_cascade) {
		switch(mod_cascade) {
			case 'all':
				modCascade = true;
				modCascadeAll = true;
				break;
			case 'some':
				modCascade = true;
				modCascadeAll = false;
				break;
			default:
				modCascade = false;
				modCascadeAll = false;
		}
		setAttrs({
			modCascade: modCascade,
			modCascadeAll: modCascadeAll
		});

		// After move, dodge, encumbrance, HP, and FP
		var thenCurrentMoveDodge = _.after(5, function () {
			updateMoveDodge();
		});

		// After DX and HT
		var thenSpeedMoveDodge = _.after(2, function () {
			updateBasicSpeed(function () {
				// After Basic Speed...
				updateBasicMove(thenCurrentMoveDodge);
				updateDodge(thenCurrentMoveDodge);
			});
		});

		// After Lift and weight...
		var thenEncumbrance = _.after(2, function () {
			updateEncLevel(thenCurrentMoveDodge);
		});

		sumRepeating('repeating_item', 'weighttotal', function (v) {
			setAttrs({ total_weight: (v * 100) / 100 }, {silent: false}, thenEncumbrance);
		});

		// Update attributes, then secondary characteristics, and so on...
		updateST(function () {
			// After ST...
			updateHP(thenCurrentMoveDodge);
			updateLift(thenEncumbrance);
			updateStrikingST();
		});
		updateDX(thenSpeedMoveDodge);
		updateIQ(function () {
			// After IQ...
			updateWill();
			updatePer(function () {
				// After Per...
				updateSense();
			});
		});
		updateHT(function () {
			updateFP(thenCurrentMoveDodge);
			thenSpeedMoveDodge();
		});

	}

	// Sum values, used in reduce
	function getSum(total, num) {
		return (+total || 0) + (+num || 0);
	}
	
	// function to sum a field from a repeating section
	function sumRepeating(sectionName, fieldName, callback) {
		getSectionIDs(sectionName, function (ids) {
			if (ids.length === 0 ) {
				callback(0);
				return;
			}
			var fieldArray = [];
			for (var i = 0; i < ids.length; i++) {
				fieldArray.push(sectionName + '_' + ids[i] + '_' + fieldName);
			}
			getAttrs(fieldArray, function (fieldValues) {
				var vals = Object.values(fieldValues);
				vals.push(0);
				var total = vals.reduce(getSum);
				callback(total);
			});
		});
	}

	// load values of a repeating section
	function loadRepeating(sectionName, fieldName, defaultValue) {
		console.log('********* loadRepeating ' + sectionName + '.' + fieldName + '*********');
		getSectionIDs(sectionName, function (ids) {
			if (ids.length === 0 ) {
				return;
			}
			var fieldArray = [];
			var update = {};
			for (var i = 0; i < ids.length; i++) {
				var propName = sectionName + '_' + ids[i] + '_' + fieldName;
				fieldArray.push(propName);
				update[propName] = defaultValue;
			}
			getAttrs(fieldArray, function (fieldValues) {
				Object.assign(update, fieldValues);
				setAttrs(update);
			});
		});
	}

	// Strength Change
	on('change:strength_points change:strength_mod', function (e) {
		updateST();
	});
	// Update Strength
	function updateST(callback) {
		callback = callback || noop;
		console.log('********* updateST *********');
		getAttrs(['strength_points', 'strength_mod'], function(v) {
			var base = 10 + ((+v.strength_points || 0) / 10 | 0);
			var mod = +v.strength_mod || 0;
			setAttrs({
				strength_base: base,
				strength: base + mod
			}, {silent: false}, callback);
		});
	}

	// Dexterity Change
	on('change:dexterity_points change:dexterity_mod', function (e) {
		updateDX();
	});
	// Update Dexterity
	function updateDX(callback) {
		callback = callback || noop;
		console.log('********* updateDX *********');
		getAttrs(['dexterity_points', 'dexterity_mod'], function(v) {
			var base = 10 + ((+v.dexterity_points || 0) / 20 | 0);
			var mod = +v.dexterity_mod || 0;
			setAttrs({
				dexterity_base: base,
				dexterity: base + mod
			}, {silent: false}, callback);
		});
	}

	// Intelligence
	on('change:intelligence_points change:intelligence_mod', function (e) {
		updateIQ();
	});
	// Update Intelligence
	function updateIQ(callback) {
		callback = callback || noop;
		console.log('********* updateIQ *********');
		getAttrs(['intelligence_points', 'intelligence_mod'], function(v) {
			var base = 10 + ((+v.intelligence_points || 0) / 20 | 0);
			var mod = +v.intelligence_mod || 0;
			setAttrs({
				intelligence_base: base,
				intelligence: base + mod
			}, {silent: false}, callback);
		});
	}

	// Health
	on('change:health_points change:health_mod', function (e) {
		updateHT();
	});
	// Update Health
	function updateHT(callback) {
		callback = callback || noop;
		console.log('********* updateHT *********');
		getAttrs(['health_points', 'health_mod'], function(v) {
			var base = 10 + ((+v.health_points || 0) / 10 | 0);
			var mod = +v.health_mod || 0;
			setAttrs({
				health_base: base,
				health: base + mod
			}, {silent: false}, callback);
		});
	}

	// HP
	on('change:strength change:hit_points_points change:hit_points_mod', function (e) {
		updateHP();
	});
	// Update HP
	function updateHP(callback) {
		console.log('********* updateHP *********');
		callback = callback || noop;
		getAttrs(['strength', 'strength_base', 'hit_points_points', 'hit_points_mod'], function(v) {
			var base = (modCascadeAll ? +v.strength : +v.strength_base) +
				((+v.hit_points_points || 0) / 2 | 0);
			var mod = +v.hit_points_mod;
			setAttrs({
				hit_points_max: base + mod
			}, {silent: false}, function () {
				getAttrs(['hit_points'], function(v2) {
					if (v2.hit_points == null) {
						setAttrs({ hit_points: base }, {silent: false}, callback);
					} else {
						callback();
					}
				});
			});
		});
	}

	// FP
	on('change:health change:fatigue_points_points change:fatigue_points_mod', function (e) {
		updateFP();
	});
	// Update FP
	function updateFP(callback) {
		console.log('********* updateFP *********');
		callback = callback || noop;
		getAttrs(['health', 'health_base', 'fatigue_points_points', 'fatigue_points_mod'], function(v) {
			var base = (modCascadeAll ? +v.health : +v.health_base) +
				((+v.fatigue_points_points || 0) / 3 | 0);
			var mod = +v.fatigue_points_mod;
			setAttrs({
				fatigue_points_max: base + mod
			}, {silent: false}, function () {
				getAttrs(['fatigue_points'], function(v2) {
					if (v2.fatigue_points == null) {
						setAttrs({ fatigue_points: base }, {silent: false}, callback);
					} else {
						callback();
					}
				});
			});
		});
	}

	// Perception
	on('change:intelligence change:perception_points change:perception_mod', function (e) {
		updatePer();
	});
	// Update Perception
	function updatePer(callback) {
		console.log('********* updatePer *********');
		callback = callback || noop;
		getAttrs(['intelligence', 'intelligence_base', 'perception_points', 'perception_mod'], function(v) {
			var base = (modCascade ? +v.intelligence : +v.intelligence_base) +
				((+v.perception_points || 0) / 5 | 0);
			var mod = +v.perception_mod || 0;
			setAttrs({
				perception_base: base,
				perception: base + mod
			}, {silent: false}, callback);
		});
	}

	// Vision, Hearing, Smell, Touch
	on('change:perception change:vision_points change:vision_mod change:hearing_points change:hearing_mod change:taste_smell_points change:taste_smell_mod change:touch_points change:touch_mod', function (e) {
		updateSense();
	});
	// Update Vision, Hearing, Smell, Touch
	function updateSense() {
		console.log('********* updateSense *********');
		getAttrs(['perception', 'perception_base', 'vision_points', 'vision_mod', 'hearing_points', 'hearing_mod', 'taste_smell_points', 'taste_smell_mod', 'touch_points', 'touch_mod'], function(v) {
			var base = (modCascade ? +v.perception : +v.perception_base);
			var visionBase = base + ((+v.vision_points || 0) / 2 | 0);
			var visionMod = +v.vision_mod || 0;
			var hearingBase = base + ((+v.hearing_points || 0) / 2 | 0);
			var hearingMod = +v.hearing_mod || 0;
			var tasteSmellBase = base + ((+v.taste_smell_points || 0) / 2 | 0);
			var tasteSmellMod = +v.taste_smell_mod || 0;
			var touchBase = base + ((+v.touch_points || 0) / 2 | 0);
			var touchMod = +v.touch_mod || 0;
			setAttrs({
				vision_base: visionBase,
				vision: visionBase + visionMod,
				hearing_base: hearingBase,
				hearing: hearingBase + hearingMod,
				taste_smell_base: tasteSmellBase,
				taste_smell: tasteSmellBase + tasteSmellMod,
				touch_base: touchBase,
				touch: touchBase + touchMod
			});
		});
	}

	// consciousness, death
	on('change:health change:consciousness_points change:consciousness_mod change:death_points change:death_mod', function (e) {
		updateDeath();
	});
	// Update consciousness, death
	function updateDeath() {
		console.log('********* updateDeath *********');
		getAttrs(['health', 'health_base', 'consciousness_points', 'consciousness_mod', 'death_points', 'death_mod'], function(v) {
			var base = (modCascade ? +v.health : +v.health_base);
			var consciousnessBase = base + ((+v.consciousness_points || 0) / 2 | 0);
			var consciousnessMod = +v.consciousness_mod || 0;
			var deathBase = base + ((+v.death_points || 0) / 2 | 0);
			var deathMod = +v.death_mod || 0;
			setAttrs({
				consciousness_base: consciousnessBase,
				consciousness: consciousnessBase + consciousnessMod,
				death_base: deathBase,
				death: deathBase + deathMod,
			});
		});
	}	
	
	// Update Willpower, Fear
	on('change:intelligence change:willpower_points change:willpower_mod change:fear_check_points change:fear_check_mod', function (e) {
		updateWill();
	});
	// Updage Willpower, Fear
	function updateWill() {
		console.log('********* updateWill *********');
		getAttrs(['intelligence', 'intelligence_base', 'willpower_points', 'willpower_mod', 'fear_check_points', 'fear_check_mod'], function(v) {
			var wBase = (modCascade ? +v.intelligence : +v.intelligence_base) +
				((+v.willpower_points || 0) / 5 | 0);
			var wMod = +v.willpower_mod || 0;
			var fBase = wBase + (modCascade ? +wMod : 0) +
				((+v.fear_check_points || 0) / 2 | 0);
			var fMod = +v.fear_check_mod || 0;
			setAttrs({
				willpower_base: wBase,
				willpower: wBase + wMod,
				fear_check_base: fBase,
				fear_check: fBase + fMod
			});
		});
	}

	// Speed
	on('change:dexterity change:health change:basic_speed_points change:basic_speed_mod', function (e) {
		updateBasicSpeed();
	});
	// Update Speed
	function updateBasicSpeed(callback) {
		console.log('********* updateBasicSpeed *********');
		callback = callback || noop;
		getAttrs(['dexterity', 'dexterity_base', 'health', 'health_base', 'basic_speed_points', 'basic_speed_mod'], function(v) {
			var dx = (modCascade ? +v.dexterity : +v.dexterity_base);
			var ht = (modCascade ? +v.health : +v.health_base);
			var base = (dx + ht) / 4 + (((+v.basic_speed_points || 0) / 5 | 0) * 0.25);
			var mod = +v.basic_speed_mod || 0;
			setAttrs({
				basic_speed_base: base,
				basic_speed: base + mod
			}, {silent: false}, callback);
		});
	}

	// Move
	on('change:basic_speed change:basic_move_points change:basic_move_mod', function (e) {
		updateBasicMove();
	});
	// Update Move
	function updateBasicMove(callback) {
		console.log('********* updateBasicMove *********');
		callback = callback || noop;
		getAttrs(['basic_speed', 'basic_speed_base', 'basic_move_points', 'basic_move_mod'], function(v) {
			var speed = (modCascade ? +v.basic_speed : +v.basic_speed_base);
			var base = Math.floor(speed) + ((+v.basic_move_points || 0) / 5 | 0);
			var mod = +v.basic_move_mod || 0;
			setAttrs({
				basic_move_base: base,
				basic_move: base + mod
			}, {silent: false}, callback);
		});
	}

	// Dodge
	on('change:basic_speed change:dodge_mod', function (e) {
		updateDodge();
	});
	// Update Dodge
	function updateDodge(callback) {
		console.log('********* updateDodge *********');
		callback = callback || noop;
		getAttrs(['basic_speed', 'basic_speed_base', 'dodge_mod'], function(v) {
			var speed = (modCascade ? +v.basic_speed : +v.basic_speed_base);
			var base = Math.floor(speed) + 3;
			var mod = +v.dodge_mod || 0;
			setAttrs({
				dodge_base: base,
				dodge: base + mod
			}, {silent: false}, callback);
		});
	}

	// Encumbered/injured move and dodge
	on('change:encumbrance_level change:dodge change:basic_move change:hit_points change:fatigue_points', function (e) {
		updateMoveDodge();
	});
	// Update encumbered/injured move and dodge
	function updateMoveDodge() {
		console.log('***** UPDATE MOVE/DODGE *****');
		getAttrs(['encumbrance_level', 'dodge', 'basic_move', 'hit_points', 'hit_points_max', 'fatigue_points', 'fatigue_points_max', 'strength_base', 'strength_mod'], function(v) {
			var dodge = +v.dodge;
			var move = +v.basic_move;
			var strength = +v.strength_base + +v.strength_mod;
			if (v.encumbrance_level === 5) {
				dodge = 0;
				move = 0;
			} else {
				dodge = dodge - +v.encumbrance_level;
				move = Math.floor(+v.basic_move * (1 - (0.2 * +v.encumbrance_level)));
				dodge = dodge < 0 ? 0 : dodge;
				move = move < 0 ? 0 : move;
			}
			if (+v.hit_points < +v.hit_points_max / 3) {
				dodge = Math.ceil(dodge / 2);
				move = Math.ceil(move / 2);
			}
			if (+v.fatigue_points < +v.fatigue_points_max / 3 ) {
				dodge = Math.ceil(dodge / 2);
				move = Math.ceil(move / 2);
				strength = Math.ceil(strength / 2);
			}
			setAttrs({
				current_move: move,
				current_dodge: dodge,
				strength: strength
			});
		});
	}

	// Lifting ST
	on('change:strength change:lift_st_points change:lift_st_mod', function (e) {
		updateLift();
	});
	// Update Lift
	function updateLift(callback) {
		console.log('********* updateLift *********');
		callback = callback || noop;
		getAttrs(['strength', 'strength_base', 'lift_st_points', 'lift_st_mod'], function(v) {
			var base = (modCascade ? +v.strength : +v.strength_base) +
				((+v.lift_st_points || 0) / 3 | 0);
			var modded = base + +v.lift_st_mod;
			var basicLift = (modded * modded) / 5;
			if (basicLift >= 10) {
				basicLift = Math.round(basicLift);
			}
			setAttrs({
				lift_st_base: base,
				lift_st: modded,
				basic_lift: basicLift
			}, {silent: false}, callback);
		});
	}

	// Striking ST
	on('change:strength change:striking_st_points change:striking_st_mod', function (e) {
		updateStrikingST();
	});
	// Update Striking
	function updateStrikingST() {
		console.log('********* updateStrikingST *********');
		getAttrs(['strength', 'strength_base', 'striking_st_points', 'striking_st_mod'], function(v) {
			var base = (modCascade ? +v.strength : +v.strength_base) +
				((+v.striking_st_points || 0) / 5 | 0);
			var mod = +v.striking_st_mod;
			setAttrs({
				striking_st_base: base,
				striking_st: base + mod
			});
		});
	}

	// Update Attributes
	on('change:strength_points change:dexterity_points change:intelligence_points change:health_points change:perception_points change:vision_points change:hearing_points change:taste_smell_points change:touch_points change:willpower_points change:fear_check_points change:hit_points_points change:fatigue_points_points change:energy_points_points change:user_pool1_points change:user_pool2_points change:basic_speed_points change:basic_move_points change:striking_st_points change:lift_st_points', function (e) {
		getAttrs(['strength_points', 'dexterity_points', 'intelligence_points', 'health_points', 'perception_points', 'vision_points', 'hearing_points', 'taste_smell_points', 'touch_points', 'willpower_points', 'fear_check_points', 'hit_points_points', 'fatigue_points_points', 'energy_points_points', 'user_pool1_points', 'user_pool2_points', 'basic_speed_points', 'basic_move_points', 'striking_st_points', 'lift_st_points' ], function(v) {
			var vals = Object.values(v);
			vals.push(0);
			setAttrs({ att_points: vals.reduce(getSum) });
		});
	});	
	
	
	// Update the total cost of Languages
	on('change:repeating_languages:spoken change:repeating_languages:written remove:repeating_languages', function (e) {
		var total = 0;
		var tally = _.after(2, function () {
			setAttrs({ languages_points: total });
		});
		sumRepeating('repeating_languages', 'spoken', function(v) {
			console.log('Spoken: ' + v);
			total += +v;
			tally();
		});
		sumRepeating('repeating_languages', 'written', function(v) {
			console.log('Written: ' + v);
			total += +v;
			tally();
		});
	});

	// Update the total cost of Cultural Familiarities
	on('change:repeating_cultures:points remove:repeating_cultures', function (e) {
		sumRepeating('repeating_cultures', 'points', function(v) {
			setAttrs({ cf_points: v });
		});
	});

	// Update the total cost of Advantages
	on('change:repeating_traits:points remove:repeating_traits', function (e) {
		sumRepeating('repeating_traits', 'points', function(v) {
			setAttrs({ advantages_points: v });
		});
	});
	
	// Update the total cost of Perks
	on('change:repeating_perks:points remove:repeating_perks', function (e) {
		sumRepeating('repeating_perks', 'points', function(v) {
			setAttrs({ perks_points: v });
		});
	});

	// Update the total cost of Disadvantages
	on('change:repeating_disadvantages:points remove:repeating_disadvantages', function (e) {
		sumRepeating('repeating_disadvantages', 'points', function(v) {
			setAttrs({ disadvantages_points: v });
		});
	});
	
	// Update the total cost of Quirks
	on('change:repeating_quirks:points remove:repeating_quirks', function (e) {
		sumRepeating('repeating_quirks', 'points', function(v) {
			setAttrs({ quirks_points: v });
		});
	});

	// Update the total cost of Racial Traits
	on('change:repeating_racial:points remove:repeating_racial', function (e) {
		sumRepeating('repeating_racial', 'points', function(v) {
			setAttrs({ racial_points: v });
		});
	});

	// Update the total cost of Skills
	on('change:repeating_skills:points remove:repeating_skills', function (e) {
		sumRepeating('repeating_skills', 'points', function(v) {
			setAttrs({ skills_points: v });
		});
	});

	// Update the total cost of Techniques
	on('change:repeating_techniques:points remove:repeating_techniques', function (e) {
		sumRepeating('repeating_techniques', 'points', function(v) {
			setAttrs({ techniques_points: v });
		});
	});

	// Update the total cost of Spells
	on('change:repeating_spells:points remove:repeating_spells', function (e) {
		sumRepeating('repeating_spells', 'points', function(v) {
			setAttrs({ spells_points: v });
		});
	});

	// Update Misc
	on('change:tl_pts change:appearance change:languages_points change:cf_points', function (e) {
		getAttrs(['tl_pts', 'appearance', 'languages_points', 'cf_points'], function(v) {
			var vals = Object.values(v);
			vals.push(0);
			setAttrs({ misc_points: vals.reduce(getSum) });
		});
	});
	
	// Update Spent Points
	on('change:att_points change:misc_points change:advantages_points change:perks_points change:disadvantages_points change:quirks_points change:racial_points change:skills_points change:techniques_points', function (e) {
		getAttrs(['att_points', 'misc_points', 'advantages_points', 'perks_points', 'disadvantages_points', 'quirks_points', 'racial_points', 'skills_points', 'techniques_points'], function(v) {
			var vals = Object.values(v);
			vals.push(0);
			setAttrs({ total_spent_points: vals.reduce(getSum) });
		});
	});

	// ----------------------------------ENCUMBERANCE-----------------------------------------------


	// Update the line LOADOUT A total weight and cost
	on('change:repeating_item:count change:repeating_item:cost change:repeating_item:loadoutacarried change:repeating_item:weight', function (e) {
		getAttrs(['repeating_item_count', 'repeating_item_cost', 'repeating_item_weight', 'repeating_item_loadoutacarried'], function (item) {
			setAttrs({
				repeating_item_loadoutaweighttotal: Math.round(item.repeating_item_count * item.repeating_item_weight * item.repeating_item_loadoutacarried * 100) / 100,
				repeating_item_loadoutacosttotal: Math.round(item.repeating_item_count * item.repeating_item_cost * item.repeating_item_loadoutacarried * 100) / 100
			});
		});
	});
	
		// Update the total weight of LOADOUT A carried items.
	on('change:repeating_item:loadoutaweighttotal remove:repeating_item', function (e) {
		sumRepeating('repeating_item', 'loadoutaweighttotal', function(v) {
			setAttrs({ loadouta_total_weight: (v * 100) / 100 });
		});
	});
	
		// Update the total cost of LOADOUT A carried items.
	on('change:repeating_item:loadoutacosttotal remove:repeating_item', function (e) {
		sumRepeating('repeating_item', 'loadoutacosttotal', function(v) {
			setAttrs({ loadouta_total_cost: (v * 100) / 100 });
		});
	});
	
	// Update the line LOADOUT B total weight and cost
	on('change:repeating_item:count change:repeating_item:cost change:repeating_item:loadoutbcarried change:repeating_item:weight', function (e) {
		getAttrs(['repeating_item_count', 'repeating_item_cost', 'repeating_item_weight', 'repeating_item_loadoutbcarried'], function (item) {
			setAttrs({
				repeating_item_loadoutbweighttotal: Math.round(item.repeating_item_count * item.repeating_item_weight * item.repeating_item_loadoutbcarried * 100) / 100,
				repeating_item_loadoutbcosttotal: Math.round(item.repeating_item_count * item.repeating_item_cost * item.repeating_item_loadoutbcarried * 100) / 100
			});
		});
	});
	
		// Update the total weight of LOADOUT B carried items.
	on('change:repeating_item:loadoutbweighttotal remove:repeating_item', function (e) {
		sumRepeating('repeating_item', 'loadoutbweighttotal', function(v) {
			setAttrs({ loadoutb_total_weight: (v * 100) / 100 });
		});
	});
	
		// Update the total cost of LOADOUT B carried items.
	on('change:repeating_item:loadoutbcosttotal remove:repeating_item', function (e) {
		sumRepeating('repeating_item', 'loadoutbcosttotal', function(v) {
			setAttrs({ loadoutb_total_cost: (v * 100) / 100 });
		});
	});
	
	// Update the line LOADOUT C total weight and cost
	on('change:repeating_item:count change:repeating_item:cost change:repeating_item:loadoutccarried change:repeating_item:weight', function (e) {
		getAttrs(['repeating_item_count', 'repeating_item_cost', 'repeating_item_weight', 'repeating_item_loadoutccarried'], function (item) {
			setAttrs({
				repeating_item_loadoutcweighttotal: Math.round(item.repeating_item_count * item.repeating_item_weight * item.repeating_item_loadoutccarried * 100) / 100,
				repeating_item_loadoutccosttotal: Math.round(item.repeating_item_count * item.repeating_item_cost * item.repeating_item_loadoutccarried * 100) / 100
			});
		});
	});
	
		// Update the total weight of LOADOUT C carried items.
	on('change:repeating_item:loadoutcweighttotal remove:repeating_item', function (e) {
		sumRepeating('repeating_item', 'loadoutcweighttotal', function(v) {
			setAttrs({ loadoutc_total_weight: (v * 100) / 100 });
		});
	});
	
		// Update the total cost of LOADOUT C carried items.
	on('change:repeating_item:loadoutccosttotal remove:repeating_item', function (e) {
		sumRepeating('repeating_item', 'loadoutccosttotal', function(v) {
			setAttrs({ loadoutc_total_cost: (v * 100) / 100 });
		});
	});

	// Get Encumbrance Level:
	on('change:total_weight change:basic_lift change:loadoutchoice', function (e) {
		updateEncLevel();
	});
	function updateEncLevel(callback) {
		getAttrs(['basic_lift', 'total_weight'], function(v) {
			callback = callback || noop;
			var basicLift = +v.basic_lift;
			var encumbranceLevel = Math.floor(v.total_weight / basicLift);
			if (encumbranceLevel > 0 && (v.total_weight % basicLift) === 0) {
				encumbranceLevel--;
			}
			if (encumbranceLevel >= 10) {
				encumbranceLevel = 5;
			} else if (encumbranceLevel >= 6) {
				encumbranceLevel = 4;
			} else if (encumbranceLevel >= 3) {
				encumbranceLevel = 3;
			}
			setAttrs(
				{ encumbrance_level: encumbranceLevel },
				{silent: false},
				callback
			);
		});
	}

	// Get Loadout Choice:
	on('sheet:opened change:loadoutchoice', updateloadout);
	//Update Loadout
	function updateloadout(callback) {
		console.log('****updateloadout****');
		getAttrs(['loadoutchoice', 'loadouta_total_weight', 'loadoutb_total_weight', 'loadoutc_total_weight'], function(v) {
		callback = callback || noop;
		if (v.loadoutchoice === "1") {
			var loadout_totalweight = v.loadouta_total_weight;
		}
		else if (v.loadoutchoice === "2") {
			var loadout_totalweight = v.loadoutb_total_weight;
		}
		else if (v.loadoutchoice === "3") {
			var loadout_totalweight = v.loadoutc_total_weight;
		}
		setAttrs(
		    { total_weight: loadout_totalweight },
		    {silent: false},
		    callback
		);
		});
		}

		
		
	
	// Wound Modifier Script
	on('sheet:opened change:repeating_ranged:type remove:repeating_ranged:type', function (e) {
	updatewoundmod ();
	});


	function updatewoundmod(callback){
	callback = callback || noop;  // assuming noop is defined somewhere, otherwise _.noop
	TAS.repeating('ranged')
    .fields('type','wound_modifier')
    .each(function(r){
      switch(r.type){
        case "Small Piercing (pi-)":
          r.wound_modifier = "0.5";
          break;


        case "Large Piercing (pi+)":
        case "Cutting (cut)":
          r.wound_modifier = "1.5";
          break;


        case "Huge Piercing (pi++)":
        case "Impaling (imp)":
          r.wound_modifier = "2";
          break;


        case "Burning (burn)":
        case "Corrosion (cor)":
        case "Fatigue (fat)":
        case "Toxic (tox)":
        case "Piercing (pi)":
        case "Crushing (cr)":
          r.wound_modifier = "1";
          break;
      }
    })
    .execute();
	};
	
		// Maneuver
	on('change:maneuver', function (e) {
	updatemans();
	});
	// Update mans
	function updatemans() {
	  console.log('********* updatemans *********');
	  getAttrs(['maneuver'], function(v) {
		var attrs = {};
	if (v.maneuver === "Aim") {
	activedefense = "Any*";
	movement = "Step | None";
	maneuverdescription = "Aim a ranged weapon to get its Acc bonus (+1 for bracing, +1 for 2 turns, +2 for 3+ turns, the combined bonus from all targeting systems cannot exceed the weapons base Accuracy) | You get no step if your two-handed weapon is braced";
	pageref = "364";
	mmanmod = "0";
	rmanmod = "0";
	}
	else if (v.maneuver === "AoAmd") {
	activedefense = "None";
	movement = "1/2 forward";
	maneuverdescription = "+4 to hit";
	pageref = "365";
	mmanmod = "4";
	rmanmod = "0";
	}
	else if (v.maneuver === "AoAmdb") {
	activedefense = "None";
	movement = "1/2 forward";
	maneuverdescription = "2 attacks on same foe with ready weapon (-4 to off-hand without Ambidexterity)";
	pageref = "365";
	mmanmod = "0";
	rmanmod = "0";
	}
	else if (v.maneuver === "AoAmf") {
	activedefense = "None";
	movement = "1/2 forward";
	maneuverdescription = "Make one feint and one attack on the same foe.";
	pageref = "365";
	mmanmod = "0";
	rmanmod = "0";
	}
	else if (v.maneuver === "AoAms") {
	activedefense = "None";
	movement = "1/2 forward";
	maneuverdescription = "+2 to damage (or +1 per damage die).";
	pageref = "365";
	mmanmod = "0";
	rmanmod = "0";
	}	
	else if (v.maneuver === "AoArd") {
	activedefense = "None";
	movement = "1/2 forward";
	maneuverdescription = "+1 to hit";
	pageref = "365";
	rmanmod = "0";
	rmanmod = "1";
	}
	else if (v.maneuver === "AoArs") {
	activedefense = "None";
	movement = "1/2 forward";
	maneuverdescription = "RoF 5+ targets 2 yard zone - RoF 10+ suppress multiple, adjacent 2 yard zones with 5+ Shots/zone.";
	pageref = "365";
	mmanmod = "0";
	rmanmod = "0";
	}
	else if (v.maneuver === "AoDid") {
	activedefense = "Any";
	movement = "Step (1/2)";
	maneuverdescription = "+2 to one Active Defense until next turn (Increased Dodge allows up to Half Move)";
	pageref = "366";
	mmanmod = "0";
	rmanmod = "0";	
	}
	else if (v.maneuver === "AoDdd") {
	activedefense = "Any";
	movement = "Step.";
	maneuverdescription = "Two different Defenses against one attack.";
	pageref = "366";
	mmanmod = "0";
	rmanmod = "0";	
	}
	else if (v.maneuver === "Atk") {
	activedefense = "Any";
	movement = "Step";
	maneuverdescription = "Attack unarmed or with a ready weapon, you make take a step before or after you attack.";
	pageref = "365";
	mmanmod = "0";
	rmanmod = "0";	
	}
	else if (v.maneuver === "CPost") {
	activedefense = "Any";
	movement = "None";
	maneuverdescription = "Standing, sitting, kneeling, crawling, prone, lying face up (see B364/MA98). Prone to standing takes two turns (Exception Acrobatic Stand).";
	pageref = "364";
	mmanmod = "0";
	rmanmod = "0";
	}
	else if (v.maneuver === "Conc") {
	activedefense = "Any";
	movement = "Step";
	maneuverdescription = "Focus on mental task. All-Out Concentrate (DF14:34) gives +1 to roll but loose active defenses. Must make Will-2 if injured or distracted.";
	pageref = "366";
	mmanmod = "0";
	rmanmod = "0";
	}
	else if (v.maneuver === "DN") {
	activedefense = "Any";
	movement = "None";
	maneuverdescription = "Take no action (Active Defenses at -4 if taking Do Nothing due to Stun; roll vs HT/IQ)";
	pageref = "364";
	mmanmod = "0";
	rmanmod = "0";
	}
	else if (v.maneuver === "Eval") {
	activedefense = "Any. This does not spoil your evaluation.";
	movement = "Step";
	maneuverdescription = "Study a foe prior to a melee attack (+1 per turn to subsequent attacks or feints, max. +3); may also use the Evaluate Bonus to cancel out penalties from Deceptive Attacks or feints";
	pageref = "364";
	mmanmod = "0";
	rmanmod = "0";
	}
	else if (v.maneuver === "Fnt") {
	activedefense = "Any";
	movement = "Step";
	maneuverdescription = "Contest of combat skill (melee or ranged) vs. combat skill, cloak/shield or DX";
	pageref = "365";
	mmanmod = "0";
	rmanmod = "0";
	}
	else if (v.maneuver === "Atkmv") {
	activedefense = "Dodge or Block only. You cannot Parry, and you may not retreat.";
	movement = "Full";
	maneuverdescription = "Move and attack at a penalty (Ranged: -2 or weapons bulk; non-slam Melee: -4, max. skill 9). For thrusting attacks, may use slam damage (HP x velocity/100). Not compatible with Flurry of Blows, Mighty Blow, Giant Step, Combos, Rapid Strike or Deceptive Attack (except slams or cinematic techniques which require final effective skill of at least 10)";
	pageref = "365";
	mmanmod = "0";
	rmanmod = "0";
	}
	else if (v.maneuver === "Mov") {
	activedefense = "Any";
	movement = "Full Move";
	maneuverdescription = "Do nothing but move (See Sprinting B354 and Acrobatic Movement MA105+)";
	pageref = "364";
	mmanmod = "0";
	rmanmod = "0";
	}
	else if (v.maneuver === "Ready") {
	activedefense = "Any";
	movement = "Step";
	maneuverdescription = "Ready or reload a weapon, adjust reach (B269), change grip, change hands (MA102)";
	pageref = "366";
	mmanmod = "0";
	rmanmod = "0";
	}
	else if (v.maneuver === "Wait") {
	activedefense = "You may defend normally while you are waiting, or after your WAIT is triggered. If you defend, you may not transform your wait into an ALL-OUT ATTACK maneuver";
	movement = "None until your WAIT is triggered. You may then move as appropriate for the maneuver chosen.";
	maneuverdescription = "Hold your action, then take an Attack, All-Out Attack, Committed Attack, Defensive Attack, Feint, Ready or Stop Hit. Specify exactly what your action will be and what will trigger it. You may also perform a Step and Wait, loosing your Step in the proceeding Maneuver";
	pageref = "366";
	mmanmod = "0";
	rmanmod = "0";
	}
	setAttrs({
	activedefense: activedefense,
	movement: movement,
	maneuverdescription: maneuverdescription,
	pageref: pageref,
	mmanmod: mmanmod,
	rmanmod: rmanmod,	
	});
	});
	}
	
</script>

<!--Roll Templates-->

<div class="sheet-hidden">

	<!--==================GURPS Roll Templates====================-->
	<rolltemplate class="sheet-rolltemplate-GURPS">
		<table>
			<tr><td colspan="3">{{charactername}}</td></tr>
			<tr><th colspan="3">{{rolltype}}</th></tr>
			<tr><td colspan="3" class="subheader">{{rollname}}</td></tr>
			<tr><td><span class="tcat">Roll:</span>{{roll}}</td><td>vs. Effective Skill</td><td>{{target}}</td></tr>
			<!--Ordinary Success-->	
			{{#rollLess() roll success }}
			<tr><td colspan="3"><span class="success">
			        {{#rollBetween() roll 3 4}}
			        Critical 
			        {{/rollBetween() roll 3 4}}
			        
			        {{#rollGreater() target 14}}
        			{{#rollTotal() roll 5}}
        			Critical 
        			{{/rollTotal() roll 5}}
        			{{/rollGreater() target 14}}
        			
			        {{#rollGreater() target 15}}
        			{{#rollTotal() roll 6}}
        			Critical 
        			{{/rollTotal() roll 6}}
        			{{/rollGreater() target 15}}
			    Success!</span></td></tr>
			{{#damageroll}}
			<tr><td class="subheader">Damage</td><td colspan="2" class="subheader">Type</td></tr>
			<tr><td>{{damageroll}}</td><td colspan="2">{{damagetype}}</td></tr>
			<tr><td colspan="3" class="notes">Damage after DR multiplied by {{woundmod}}</td></tr>
			<tr><td colspan="3" class="subheader">Notes</td></tr>		
			<tr><td colspan="3" class="notes">{{notes}}</td></tr>
			
			<!------ Hit Location Template Helper ------>
			<tr><td colspan="3"><span class="tcat">Hit Location</span></td></tr>
			
			{{#rollLess() hit-loc 5}}
			<tr><td colspan="3"><span class="hitlocation">Skull!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollLess() hit-loc 5}}
			
			{{#rollTotal() hit-loc 5}}
			<tr><td colspan="3"><span class="hitlocation">Face!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 5}}		
			
			{{#rollBetween() hit-loc 6 7}}
			<tr><td colspan="3"><span class="hitlocation">Right Leg!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollBetween() hit-loc 6 7}}	
			
			{{#rollTotal() hit-loc 8}}
			<tr><td colspan="3"><span class="hitlocation">Right Arm!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 8}}

			{{#rollBetween() hit-loc 9 10}}
			<tr><td colspan="3"><span class="hitlocation">Torso!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollBetween() hit-loc 9 10}}
			
			{{#rollTotal() hit-loc 11}}
			<tr><td colspan="3"><span class="hitlocation">Groin!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 11}}
			
			{{#rollTotal() hit-loc 12}}
			<tr><td colspan="3"><span class="hitlocation">Left Arm!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 12}}
			
			{{#rollBetween() hit-loc 13 14}}
			<tr><td colspan="3"><span class="hitlocation">Left Leg!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollBetween() hit-loc 13 14}}
			
			{{#rollTotal() hit-loc 15}}
			<tr><td colspan="3"><span class="hitlocation">Hand!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 15}}
			
			{{#rollTotal() hit-loc 16}}
			<tr><td colspan="3"><span class="hitlocation">Foot!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 16}}
			
			{{#rollBetween() hit-loc 17 18}}
			<tr><td colspan="3"><span class="hitlocation">Neck!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{critbody}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollBetween() hit-loc 17 18}}			
			
			<!-- =====CALLED SHOTS============-->
			{{#rollTotal() hit-loc 21}}
			<tr><td colspan="3"><span class="hitlocation">Left Eye!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 21}}
			
			{{#rollTotal() hit-loc 22}}
			<tr><td colspan="3"><span class="hitlocation">Right Eye!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 22}}
			
			{{#rollTotal() hit-loc 23}}
			<tr><td colspan="3"><span class="hitlocation">Skull!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 23}}
			
			{{#rollTotal() hit-loc 24}}
			<tr><td colspan="3"><span class="hitlocation">Face!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 24}}
			
			{{#rollTotal() hit-loc 25}}
			<tr><td colspan="3"><span class="hitlocation">Right Leg!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 25}}
			
			{{#rollTotal() hit-loc 26}}
			<tr><td colspan="3"><span class="hitlocation">Right Arm!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 26}}
			
			{{#rollTotal() hit-loc 27}}
			<tr><td colspan="3"><span class="hitlocation">Torso!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 27}}
			
			{{#rollTotal() hit-loc 28}}
			<tr><td colspan="3"><span class="hitlocation">Groin!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 28}}
			
			{{#rollTotal() hit-loc 29}}
			<tr><td colspan="3"><span class="hitlocation">Left Arm!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 29}}
			
			{{#rollTotal() hit-loc 30}}
			<tr><td colspan="3"><span class="hitlocation">Left Leg!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 30}}
			
			{{#rollTotal() hit-loc 31}}
			<tr><td colspan="3"><span class="hitlocation">Right Hand!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 31}}
			
			{{#rollTotal() hit-loc 32}}
			<tr><td colspan="3"><span class="hitlocation">Right Foot!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 32}}
			
			{{#rollTotal() hit-loc 33}}
			<tr><td colspan="3"><span class="hitlocation">Left Hand!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 33}}
			
			{{#rollTotal() hit-loc 34}}
			<tr><td colspan="3"><span class="hitlocation">Left Foot!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 34}}
			
			{{#rollTotal() hit-loc 35}}
			<tr><td colspan="3"><span class="hitlocation">Neck!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 35}}
			
			{{#rollTotal() hit-loc 36}}
			<tr><td colspan="3"><span class="hitlocation">Vitals!</span></td></tr>
			    {{#rollBetween() 3 4}}
		        <tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
		        {{/rollBetween() 3 4}}
		        {{#rollBetween() target 15 20}}
    			{{#rollTotal() roll 5}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 5}}
    			{{/rollBetween() target 15 20}}
		        {{#rollBetween() target 16 20}}
    			{{#rollTotal() roll 6}}
    			<tr><td colspan="3"><span class="hitlocation">{{crithead}}</span></td></tr>
    			{{/rollTotal() roll 6}}
    			{{/rollBetween() target 16 20}}
			{{/rollTotal() hit-loc 36}}
	
			{{/damageroll}}
			{{/rollLess() roll success}}
			
			<!--Ordinary Fail-->
			{{#rollGreater() roll target}}
			<tr><td colspan="3"><span class="fail">
			    {{#rollTotal() roll 18}}
    			Critical 
    			{{/rollTotal() roll 18}}
    			{{#rollBetween() target 1 15}}
    			{{#rollTotal() roll 17}}
    			Critical
    			{{/rollTotal() roll 17}}
    			{{/rollBetween() target 1 15}}
			 Fail!</span></td> <!--Roll was greater than target value--></tr>
			{{/rollGreater() roll target}}
        </table>
	</rolltemplate>
</div>